(this.webpackJsonprainstorm=this.webpackJsonprainstorm||[]).push([[0],{105:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_clear_sky.3cec5a70.svg"},127:function(e,t,r){},128:function(e,t,r){},135:function(e,t,r){},136:function(e,t,r){},138:function(e,t,r){},209:function(e,t,r){var a={"./day_clear_sky.svg":105,"./day_cloudy_sky.svg":210,"./day_half_clear_sky.svg":211,"./day_light_rain.svg":212,"./day_moderate_rain.svg":213,"./day_moderate_rain_showers.svg":214,"./day_moderate_sleet.svg":215,"./day_nearly_clear_sky.svg":216,"./day_overcast.svg":217,"./day_thunder.svg":218,"./day_thunderstorm.svg":219,"./day_unknown.svg":220};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id=209},210:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_cloudy_sky.28c5a064.svg"},211:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_half_clear_sky.f2367887.svg"},212:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_light_rain.8de418d1.svg"},213:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_moderate_rain.1ac9a777.svg"},214:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_moderate_rain_showers.5bdbfbe3.svg"},215:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_moderate_sleet.b195ed64.svg"},216:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_nearly_clear_sky.9a7090ce.svg"},217:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_overcast.062fc05d.svg"},218:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_thunder.08acff3b.svg"},219:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_thunderstorm.fb8d6c57.svg"},220:function(e,t,r){"use strict";r.r(t),t.default=r.p+"static/media/day_unknown.d6ceac86.svg"},221:function(e,t,r){},222:function(e,t,r){},228:function(e,t,r){"use strict";r.r(t);var a,n=r(0),s=r.n(n),c=r(18),o=r.n(c),i=(r(127),r(128),r(25)),u=r(26),l=r(32),d=r(31),h=r(55),f=r(19),p=r.n(f),v=r(30),b="FORECAST_FETCH_START",m="FORECAST_FETCH_SUCCESS",j="FORECAST_FETCH_FAILURE",y="SET_DISPLAY_TIMES",g=r.p+"static/media/SMHI.147242e8.jpg";!function(e){e.unknown="unknown",e.clear_sky="clear_sky",e.nearly_clear_sky="nearly_clear_sky",e.half_clear_sky="half_clear_sky",e.cloudy_sky="cloudy_sky",e.overcast="overcast",e.light_rain="light_rain",e.moderate_rain="moderate_rain",e.heavy_rain="heavy_rain"}(a||(a={}));var O=function(){function e(t,r){Object(i.a)(this,e),this.name=void 0,this.logo=void 0,this.name=t,this.logo=r}return Object(u.a)(e,[{key:"fetchForecast",value:function(){var e=Object(v.a)(p.a.mark((function e(t,r,a){var n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestData(t.lat.toString(),t.long.toString());case 3:return s=e.sent,e.next=6,this.formatResponse(s);case 6:n=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),a(e.t0),e.abrupt("return");case 13:r(n);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,r,a){return e.apply(this,arguments)}}()}]),e}(),w=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.call(this,"SMHI",g)).icons={1:a.clear_sky,2:a.nearly_clear_sky,3:a.half_clear_sky,4:a.half_clear_sky,5:a.cloudy_sky,6:a.overcast,18:a.light_rain,19:a.moderate_rain},e}return Object(u.a)(r,[{key:"requestData",value:function(){var e=Object(v.a)(p.a.mark((function e(t,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 9,e.next=3,fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+r.substr(0,9)+"/lat/"+t.substr(0,9)+"/data.json");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Weather response error! status: ' + result.status");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"formatResponse",value:function(){var e=Object(v.a)(p.a.mark((function e(t){var r,n,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={weatherPoints:[]},e.next=3,t.json();case 3:return n=e.sent,n.timeSeries.forEach((function(e){var t=new Date(e.validTime),n=e.parameters,c={temperature:NaN,wind:NaN,gust:NaN,symbol:a.unknown};n.forEach((function(e){var t=e.values[0];switch(e.name){case"t":c.temperature=t;break;case"ws":c.wind=t;break;case"gust":c.gust=t;break;case"Wsymb2":if(!s.icons[t]){console.warn("Unknown symbol value",t),c.symbol=a.unknown;break}c.symbol=s.icons[t]}})),r.weatherPoints.push({time:t,weather:c})})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O),_=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(i.a)(this,r),(e=t.call(this,"SMHI2",g)).icons={1:a.clear_sky,2:a.nearly_clear_sky,3:a.half_clear_sky,4:a.half_clear_sky,5:a.cloudy_sky,6:a.overcast,18:a.light_rain,19:a.moderate_rain},e}return Object(u.a)(r,[{key:"requestData",value:function(){var e=Object(v.a)(p.a.mark((function e(t,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 9,e.next=3,fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+r.substr(0,9)+"/lat/"+t.substr(0,9)+"/data.json");case 3:if((a=e.sent).ok){e.next=6;break}throw new Error("Weather response error! status: ' + result.status");case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"formatResponse",value:function(){var e=Object(v.a)(p.a.mark((function e(t){var r,n,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={weatherPoints:[]},e.next=3,t.json();case 3:return n=e.sent,n.timeSeries.forEach((function(e){var t=new Date(e.validTime),n=e.parameters,c={temperature:NaN,wind:NaN,gust:NaN,symbol:a.unknown};n.forEach((function(e){var t=e.values[0];switch(e.name){case"t":c.temperature=t;break;case"ws":c.wind=t;break;case"gust":c.gust=t;break;case"Wsymb2":if(!s.icons[t]){console.warn("Unknown symbol value",t);break}c.symbol=s.icons[t]}})),r.weatherPoints.push({time:t,weather:c})})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(O),k=[new w,new _];function x(){return k}function S(e){return{type:b,provider:e}}function T(e,t){return{type:m,forecast:t,provider:e}}function N(e,t){return{type:j,errorMessage:t,provider:e}}r(135);var E=r(92),L=(r(136),r(6)),C=function(e){return Object(L.jsx)("div",{className:"paper",style:e.style,children:e.children})},F=r(232),M=(r(138),F.a.Text);console.log(r(105));var D=function(e){return Object(L.jsx)("div",{className:"weather_cell",children:void 0!=e.weather&&Object(L.jsxs)(s.a.Fragment,{children:[Object(L.jsxs)(M,{strong:!0,children:[Math.round(e.weather.temperature)," \xb0C"]}),e.weather.symbol&&Object(L.jsx)("img",{className:"weather_symbol",src:r(209)("./day_"+e.weather.symbol+".svg").default}),Object(L.jsxs)("div",{children:[Object(L.jsx)(M,{strong:!0,children:Math.round(e.weather.wind)}),Object(L.jsxs)(M,{type:"secondary",children:[" (",Math.round(e.weather.gust),") "]}),Object(L.jsx)(M,{strong:!0,children:"m/s"})]})]})})},R=r(230),A=(r(221),F.a.Text),P=function(e){return Object(L.jsx)("div",{className:"time_cell",children:Object(L.jsx)(A,{strong:!0,children:("0"+e.time.getHours()).slice(-2)})})},I=(r(222),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){var e=this;return Object(L.jsxs)("div",{children:[this.props.name,Object(L.jsxs)("div",{className:"columns",children:[Object(L.jsx)("div",{className:"right-column",children:Object(L.jsx)("div",{className:"time-row",style:{width:"100%"},children:Object(L.jsx)(C,{style:{width:"100%",height:"100%"}})})}),Object(L.jsxs)("div",{className:"all-columns",children:[Object(L.jsx)("div",{className:"time-row"}),this.props.tableData.providers.map((function(e,t){return Object(L.jsx)("div",{className:"weather-row",children:Object(L.jsx)(C,{style:{width:"100%",height:"100%"}})},t)}))]}),Object(L.jsxs)("div",{className:"left-column",children:[Object(L.jsx)("div",{className:"time-row"}),this.props.tableData.providers.map((function(e,t){return Object(L.jsx)("div",{className:"weather-row",children:Object(L.jsx)(F.a,{className:"weather-provider-name",children:e.name})},t)}))]}),Object(L.jsxs)("div",{className:"divider-column",children:[Object(L.jsx)("div",{className:"time-row"}),this.props.tableData.providers.map((function(e,t){return Object(L.jsx)("div",{className:"weather-row",children:Object(L.jsx)(R.a,{type:"vertical",style:{height:"calc(100% - 5px)",margin:0}})},t)}))]}),Object(L.jsxs)("div",{className:"right-column",style:{overflowX:"auto"},children:[Object(L.jsx)("div",{className:"time-row",children:Array.from(this.props.tableData.columns,(function(e){var t=Object(E.a)(e,2),r=t[0],a=t[1];return Object(L.jsx)(P,{time:a.date},r)}))}),this.props.tableData.providers.map((function(t,r){return Object(L.jsx)("div",{className:"weather-row",children:Array.from(e.props.tableData.columns,(function(e){var r=Object(E.a)(e,2),a=r[0],n=r[1];return Object(L.jsx)(D,{weather:n.weatherMap.get(t)},a)}))},r)}))]})]})]})}}]),r}(s.a.Component));r(120);function U(e,t,r){for(var a=[],n=0;n<r;n++)a.push(new Date(e.getTime()+n*t));return a}var H=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(i.a)(this,r);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).days={1:"M\xe5ndag",2:"Tisdag",3:"Onsdag",4:"Torsdag",5:"Fredag",6:"L\xf6rdag",7:"S\xf6ndag"},e}return Object(u.a)(r,[{key:"getTableData",value:function(){var e=[],t=this.props.weatherStateForecasts,r=t.map((function(e){return e.weatherProvider}));return t.forEach((function(t){t.loading||t.forecast.weatherPoints.forEach((function(a){var n,s=function(e){var t=new Date;t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0);var r=e.getTime()-t.getTime();return Math.floor(r/864e5)}(n="string"===typeof a.time?new Date(a.time):a.time);if(s>=0){var c;s>=e.length&&e.push({columns:new Map,providers:r});var o=e[s],i=n.getTime();o.columns.has(i)||o.columns.set(i,{date:n,weatherMap:new Map}),null===(c=o.columns.get(i))||void 0===c||c.weatherMap.set(t.weatherProvider,a.weather)}}))})),e}},{key:"getTimePointCount",value:function(e){return 24}},{key:"getTableName",value:function(e,t){var r="";if(!t)return r;switch(e){case 0:r+="Idag, ";break;case 1:r+="Imorgon, "}switch(t.getDay()){case 1:r+="M\xe5ndag";break;case 2:r+="Tisdag";break;case 3:r+="Onsdag";break;case 4:r+="Torsdag";break;case 5:r+="Fredag";break;case 6:r+="L\xf6rdag";break;case 0:r+="S\xf6ndag"}return r}},{key:"render",value:function(){var e=this,t=this.getTableData();return Object(L.jsx)("div",{className:"list",children:t.map((function(t,r){var a;return Object(L.jsx)(I,{tableData:t,name:e.getTableName(r,null===(a=t.columns.get(t.columns.keys().next().value))||void 0===a?void 0:a.date)},r)}))})}}]),r}(s.a.Component),q=r(20),J=r(70),W=r(233),X=r(231),B=r(113),Y="UPDATE_USER_LOCATION",z="SELECT_LOCATION",G="SEARCH_START",V="SEARCH_SUCCESS",$="SEARCH_FAILURE",K=Date.now(),Q="";function Z(e){return{type:V,results:e}}function ee(e){return{type:$,errorMessage:e}}function te(e,t){Date.now()<K||function(e,t){re.apply(this,arguments)}(e,t)}function re(){return(re=Object(v.a)(p.a.mark((function e(t,r){var a,n,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://api.locationiq.com/v1/autocomplete.php",e.next=4,fetch("".concat("https://api.locationiq.com/v1/autocomplete.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&q=").concat(t,"&accept-language=sv"));case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,a.ok?(s=ae(n),r(Z(s))):"Unable to geocode"==n.error?r(Z([])):(console.error("Geocode response error! status: "+a.statusText),r(ee(a.status.toString())));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){var t=[];try{var r,a=Object(B.a)(e);try{for(a.s();!(r=a.n()).done;){var n=r.value;t.push({country:n.display_address,name:n.display_place,lat:Number(n.lat),long:Number(n.lon),alt:0})}}catch(s){a.e(s)}finally{a.f()}return console.log(t),t}catch(c){return console.error(c.message),[]}}var ne=W.a.Option,se=F.a.Text,ce=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(e){var a;return Object(i.a)(this,r),(a=t.call(this,e)).state={searchText:""},a.handleTextChange=a.handleTextChange.bind(Object(J.a)(a)),a}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.getCurrentPosition((function(t){var r={country:"",name:"Your Location",lat:t.coords.latitude,long:t.coords.longitude,alt:t.coords.altitude?t.coords.altitude:0};e.props.updateUserLocation(r),e.props.selectLocation(r),e.props.fetchForecasts(r)}),(function(e){}))}},{key:"handleTextChange",value:function(e){this.setState(Object(q.a)(Object(q.a)({},this.state),{},{searchText:e}))}},{key:"handleSearch",value:function(e){e&&this.props.searchLocations(e)}},{key:"handleSelect",value:function(e){for(var t=this.props.locationResults,r=0;r<t.length;r++)if(t[r].name===e){this.props.selectLocation(t[r]),this.props.fetchForecasts(t[r]);break}}},{key:"render",value:function(){var e=this,t=[];if(this.props.isLoading)t.push(oe(Object(L.jsx)(X.a,{}),"spin",0));else if(this.props.errorMessage)t.push(oe(Object(L.jsxs)(se,{type:"danger",children:["Error! Response status: ",this.props.errorMessage]}),"error",0));else if(0===this.props.locationResults.length)t.push(oe(Object(L.jsx)(se,{children:"No locations found."}),"no locations",0));else for(var r=this.props.locationResults,a=0;a<r.length;a++){var n=r[a];t.push(oe(Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[Object(L.jsxs)(se,{strong:!0,children:[n.name,"  "]}),Object(L.jsx)(se,{type:"secondary",children:n.country})]}),n.name,a))}return Object(L.jsx)(W.a,{showSearch:!0,style:this.props.style,value:this.state.searchText?this.state.searchText:void 0,placeholder:"S\xf6k",size:"large",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,onSearch:function(t){return e.handleSearch(t)},onChange:function(t){return e.handleTextChange(t)},onSelect:function(t){return e.handleSelect(t)},notFoundContent:null,children:t})}}]),r}(s.a.Component);function oe(e,t,r){return Object(L.jsx)(ne,{value:t,children:e},r)}var ie=Object(h.b)((function(e){return{selectedLocation:e.locationSearch.selectedLocation,locationResults:e.locationSearch.searchResults,isLoading:e.locationSearch.isLoading,errorMessage:e.locationSearch.errorMessage}}),(function(e){return{selectLocation:function(t){return e(function(e){return{type:z,selectedLocation:e}}(t))},searchLocations:function(t){return e(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(r){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((a=e.trim())!==Q){t.next=3;break}return t.abrupt("return");case 3:Q=a,r({type:G}),K=Date.now()+1e3,setTimeout((function(){return te(e,r)}),1001);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},fetchForecasts:function(t){return e(function(e){return function(){var t=Object(v.a)(p.a.mark((function t(r){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=function(e,t){return r(T(e,t))},n=function(e,t){return r(N(e,t.message))},x().forEach((function(t){r(S(t)),t.fetchForecast(e,(function(e){return a(t,e)}),(function(e){return n(t,e)}))}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},updateUserLocation:function(t){return e(function(e){return{type:Y,location:e}}(t))}}}))(ce),ue=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(u.a)(r,[{key:"render",value:function(){return console.log("Render!!"),Object(L.jsxs)("div",{children:[Object(L.jsx)(ie,{style:{width:"100%"}}),Object(L.jsx)(H,{weatherStateForecasts:this.props.weatherStateForecasts})]})}}]),r}(s.a.Component);var le=Object(h.b)((function(e){return{location:e.locationSearch.selectedLocation,displayTimes:e.forecasts.displayTimes,weatherStateForecasts:e.forecasts.weatherStateForecasts}}),(function(e){return{setDisplayTimes:function(t){return e({type:y,displayTimes:t})}}}))(ue);var de=function(){return Object(L.jsx)("div",{id:"app",children:Object(L.jsx)("div",{className:"page",children:Object(L.jsx)(le,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var he=r(59),fe={selectedLocation:void 0,searchResults:[],isLoading:!1,errorMessage:"",userLocation:void 0};var pe=r(116),ve={weatherStateForecasts:function(){var e=[];return x().forEach((function(t){var r={weatherProvider:t,loading:!0,forecast:{weatherPoints:[]}};e.push(r)})),console.log("Initial forecasts:",e),e}(),displayTimes:function(e){var t=new Date;return t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),U(t,36e5,e)}(24),nothing:1};var be=Object(he.b)({locationSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(q.a)(Object(q.a)({},e),{},{userLocation:t.location});case z:return Object(q.a)(Object(q.a)({},e),{},{selectedLocation:t.selectedLocation});case G:return Object(q.a)(Object(q.a)({},e),{},{isLoading:!0});case V:return Object(q.a)(Object(q.a)({},e),{},{isLoading:!1,searchResults:t.results,errorMessage:""});case $:return Object(q.a)(Object(q.a)({},e),{},{isLoading:!1,searchResults:[],errorMessage:t.errorMessage});default:return e}},forecasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return console.log("Fetch start!!"),void 0!==(a=(r=JSON.parse(JSON.stringify(e.weatherStateForecasts))).find((function(e){return e.weatherProvider.name===t.provider.name})))&&(a.loading=!0),Object(q.a)(Object(q.a)({},e),{},{weatherStateForecasts:r});case m:var r,a;return console.log("Fetch success!!"),void 0!==(a=(r=JSON.parse(JSON.stringify(e.weatherStateForecasts))).find((function(e){return e.weatherProvider.name===t.provider.name})))&&(a.loading=!1,a.forecast=t.forecast),Object(q.a)(Object(q.a)({},e),{},{weatherStateForecasts:r});case j:return console.log("Fetch fail",e),Object(q.a)({},e);case y:default:return e}}}),me=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||he.c,je=Object(he.d)(be,{},Object(he.c)(Object(he.a)(pe.a),me()));o.a.render(Object(L.jsx)(h.a,{store:je,children:Object(L.jsx)(de,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[228,1,2]]]);
//# sourceMappingURL=main.7eb052da.chunk.js.map