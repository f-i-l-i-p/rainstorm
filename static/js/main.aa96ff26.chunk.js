(this.webpackJsonprainstorm=this.webpackJsonprainstorm||[]).push([[0],{130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},135:function(e,t,a){},210:function(e,t,a){var n={"./clear_sky_day.svg":211,"./clear_sky_night.svg":212,"./cloudy.svg":213,"./fog.svg":214,"./half_clear_sky_day.svg":215,"./half_clear_sky_night.svg":216,"./heavy_rain.svg":217,"./heavy_sleet.svg":218,"./light_rain.svg":219,"./light_sleet.svg":220,"./moderate_rain.svg":221,"./moderate_sleet.svg":222,"./nearly_clear_sky_day.svg":223,"./nearly_clear_sky_night.svg":224,"./overcast.svg":225,"./snow.svg":226,"./thunder.svg":227,"./unknown.svg":228};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=210},211:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/clear_sky_day.08d2252c.svg"},212:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/clear_sky_night.fe72ba7f.svg"},213:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/cloudy.b1731609.svg"},214:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/fog.fdf19a8b.svg"},215:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/half_clear_sky_day.89d8c1b7.svg"},216:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/half_clear_sky_night.8d02af80.svg"},217:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/heavy_rain.3366fbb7.svg"},218:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/heavy_sleet.fa0fb9d8.svg"},219:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/light_rain.920a6452.svg"},220:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/light_sleet.ae8a3066.svg"},221:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/moderate_rain.2a623bba.svg"},222:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/moderate_sleet.7758da5c.svg"},223:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/nearly_clear_sky_day.36e650c9.svg"},224:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/nearly_clear_sky_night.5d46915e.svg"},225:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/overcast.a2822c8c.svg"},226:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/snow.9758315a.svg"},227:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/thunder.31fc6f06.svg"},228:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/unknown.791c8f32.svg"},229:function(e,t,a){},230:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){"use strict";a.r(t);var n=a(20),r=a.n(n),s=(a(130),a(131),a(24)),i=a(25),c=a(28),o=a(27),u=a(0),l=a.n(u),h=(a(132),a(133),a(4)),d=function(e){return Object(h.jsx)("div",{className:"paper",style:e.style,children:e.children})},p=a(245),f=(a(135),a(35)),m=p.a.Text;var v=Object(f.b)((function(e){return{showGust:e.settings.showGust,showMinMaxTemp:e.settings.showMinMaxTemp}}))((function(e){return Object(h.jsx)("div",{className:"weather_cell",children:void 0!==e.weather&&Object(h.jsxs)(l.a.Fragment,{children:[e.showMinMaxTemp&&e.weather.temperatureMin&&e.weather.temperatureMax?Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{strong:!0,className:"minimum",children:Math.round(e.weather.temperatureMin)}),Object(h.jsx)(m,{type:"secondary",style:{marginLeft:"1px",marginRight:"1px"},children:"/"}),Object(h.jsx)(m,{strong:!0,className:"maximum",children:Math.round(e.weather.temperatureMax)}),Object(h.jsx)(m,{strong:!0,children:" \xb0C"})]}):Object(h.jsxs)(m,{strong:!0,children:[Math.round(e.weather.temperature)," \xb0C"]}),e.weather.symbol&&Object(h.jsx)("img",{className:"weather_symbol",alt:"",src:a(210)("./"+e.weather.symbol+".svg").default}),Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(m,{type:"secondary",children:Math.round(e.weather.wind)}),e.showGust&&e.weather.gust&&Object(h.jsx)(m,{className:"maximum",type:"secondary",style:{marginLeft:"1px",marginRight:"1px"},children:"("+Math.round(e.weather.gust)+")"}),Object(h.jsx)(m,{type:"secondary",children:"m/s"})]}),Object(h.jsxs)(m,{type:"secondary",children:[" ",e.weather.precipitation+" "+e.weather.precipitationUnit]})]})]})})})),g=a(243),j=(a(229),p.a.Text),b=function(e){return Object(h.jsx)("div",{className:"time_cell",children:Object(h.jsx)(j,{strong:!0,children:e.time})})},y=(a(230),p.a.Title),_=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)(y,{level:4,children:this.props.name}),Object(h.jsxs)("div",{className:"columns",children:[Object(h.jsx)("div",{className:"right-column",children:Object(h.jsx)("div",{className:"time-row",style:{width:"100%"},children:Object(h.jsx)(d,{style:{width:"100%",height:"100%"}})})}),Object(h.jsxs)("div",{className:"all-columns",children:[Object(h.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(h.jsx)("div",{className:"weather-row",children:Object(h.jsx)(d,{style:{width:"100%",height:"100%"}})},t)}))]}),Object(h.jsxs)("div",{className:"left-column",children:[Object(h.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(h.jsx)("div",{className:"weather-row",children:Object(h.jsx)(p.a,{className:"weather-provider-name",children:e})},t)}))]}),Object(h.jsxs)("div",{className:"divider-column",children:[Object(h.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(h.jsx)("div",{className:"weather-row",children:Object(h.jsx)(g.a,{type:"vertical",style:{height:"calc(100% - 5px)",margin:0}})},t)}))]}),Object(h.jsxs)("div",{className:"right-column",style:{overflowX:"auto"},children:[Object(h.jsx)("div",{className:"time-row",style:{justifyContent:"space-around"},children:this.props.tableData.map((function(e,t){return Object(h.jsx)(b,{time:w(e)},t)}))}),this.props.providers.map((function(t,a){return Object(h.jsx)("div",{className:"weather-row",style:{justifyContent:"space-around"},children:e.props.tableData.map((function(e,a){return Object(h.jsx)(v,{weather:e.weather[t]},a)}))},a)}))]})]})]})}}]),a}(l.a.Component);function w(e){var t=e;return t.date?("0"+t.date.getHours()).slice(-2):t.startDate&&t.endDate?("0"+t.startDate.getHours()).slice(-2)+"\u2014"+("0"+t.endDate.getHours()).slice(-2):""}var O=_,x=a(244),k=(p.a.Title,function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getTableName",value:function(e,t){var a="";if(!t)return a;switch(a=0===e?"Idag, ":"",t.getDay()){case 1:a+="M\xe5ndag";break;case 2:a+="Tisdag";break;case 3:a+="Onsdag";break;case 4:a+="Torsdag";break;case 5:a+="Fredag";break;case 6:a+="L\xf6rdag";break;case 0:a+="S\xf6ndag"}return a}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<this.props.forecast.days.length-1;a+=2)t.push([this.props.forecast.days[a],this.props.forecast.days[a+1]]);return Object(h.jsx)("div",{className:"list",children:this.props.isLoading?Object(h.jsx)(x.a,{className:"spin",size:"large"}):Object(h.jsxs)("div",{className:"items",children:[Object(h.jsx)(O,{tableData:this.props.forecast.hours,providers:this.props.forecast.providers,name:this.getTableName(0,this.props.forecast.hours[0].date)}),t.map((function(t,a){return Object(h.jsx)("div",{className:"weather-table-pair",children:t.map((function(t,n){return Object(h.jsx)(O,{tableData:t.spans,providers:e.props.forecast.providers,name:e.getTableName(a+n+1,t.spans[0].startDate)},n)}))},a)}))]})})}}]),a}(l.a.Component));var N,S=Object(f.b)((function(e){return{forecast:e.forecasts.forecast,isLoading:e.forecasts.isLoading,selectedLocation:e.locationSearch.selectedLocation}}))(k),T=a(13),L=a(246),D=a(119),M=a(123),C=a(17),E=a.n(C),U=a(29),F=a(116),I=0;function R(e,t){var a=e.trim();if(a!==N){if(N=a,""===a)return t.onSuccess([]),void I++;var n=++I;setTimeout((function(){return function(e,t,a){return W.apply(this,arguments)}(n,a,t)}),500)}}function A(e){return e!==I}function G(e){return P.apply(this,arguments)}function P(){return(P=Object(U.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://api.locationiq.com/v1/autocomplete.php",e.abrupt("return",fetch("".concat("https://api.locationiq.com/v1/autocomplete.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&q=").concat(t,"&viewbox=3,44,32,71&limit=20&dedupe=1&accept-language=sv")));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t,a=[],n=Object(F.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push({country:r.display_address,name:r.display_place,lat:Number(r.lat),long:Number(r.lon),alt:0})}}catch(s){n.e(s)}finally{n.f()}return a}function W(){return(W=Object(U.a)(E.a.mark((function e(t,a,n){var r,s,i,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,G(a);case 4:if(r=e.sent,!A(t)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,r.json();case 9:if(s=e.sent,!A(t)){e.next=12;break}return e.abrupt("return");case 12:r.ok?(i=H(s),n.onSuccess(i)):"Unable to geocode"===s.error?(c=[],n.onSuccess(c)):(console.warn("Geocode response error!",r.statusText),n.onAbort());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q="SELECT_LOCATION",B="SELECT_USER_LOCATION",z="GEOCODE_START",J="GEOCODE_SUCCESS",V="GEOCODE_FAILURE",X="LOCATE_USER_START",Y="LOCATE_USER_SUCCESS",K="LOCATE_USER_FAILURE";function $(e){navigator.geolocation.getCurrentPosition((function(t){return function(e,t){return Q.apply(this,arguments)}(t.coords,e)}),(function(e){}))}function Q(){return(Q=Object(U.a)(E.a.mark((function e(t,a){var n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(t.latitude,t.longitude);case 2:if((n=e.sent).ok){e.next=6;break}return a.onError(),e.abrupt("return");case 6:return e.next=8,n.json();case 8:r=e.sent,(s=te(r)).alt=t.altitude||NaN,a.onSuccess(s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(U.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://eu1.locationiq.com/v1/reverse.php",e.abrupt("return",fetch("".concat("https://eu1.locationiq.com/v1/reverse.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&lat=").concat(t,"&lon=").concat(a,"&format=json&accept-language=sv")));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return{country:"Fr\xe5n din position",name:e.address.city||e.address.municipality||e.address.county||e.address.country,lat:e.lat,long:e.lon,alt:NaN}}function ae(e){return{type:V,errorMessage:e}}function ne(e){return{type:Y,location:e}}a(236);var re,se=p.a.Text,ie=function(e){return Object(h.jsxs)("button",{className:"location-list-item",onClick:function(){return e.onSelect(e.location)},children:[Object(h.jsx)(se,{strong:!0,children:e.location.name}),Object(h.jsx)(se,{type:"secondary",children:e.location.country})]})},ce="FORECAST_FETCH_START",oe="FORECAST_FETCH_SUCCESS",ue="FORECAST_FETCH_FAILURE";function le(e){var t=new Date;return t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),de(t,36e5,e)}function he(e){var t=new Date;return t.setDate(t.getDate()+1),de(t,864e5,e)}function de(e,t,a){for(var n=[],r=0;r<a;r++)n.push(new Date(e.getTime()+r*t));return n}!function(e){e.unknown="unknown",e.clear_sky_day="clear_sky_day",e.clear_sky_night="clear_sky_night",e.nearly_clear_sky_day="nearly_clear_sky_day",e.nearly_clear_sky_night="nearly_clear_sky_night",e.half_clear_sky_day="half_clear_sky_day",e.half_clear_sky_night="half_clear_sky_night",e.cloudy="cloudy",e.light_rain="light_rain",e.moderate_rain="moderate_rain",e.heavy_rain="heavy_rain",e.light_sleet="light_sleet",e.moderate_sleet="moderate_sleet",e.heavy_sleet="heavy_sleet",e.snow="snow",e.thunder="thunder",e.fog="fog"}(re||(re={}));var pe=function(){function e(t){Object(s.a)(this,e),this.name=void 0,this.name=t}return Object(i.a)(e,[{key:"fetchForecast",value:function(){var e=Object(U.a)(E.a.mark((function e(t,a,n,r){var s,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestData(a.lat.toString(),a.long.toString());case 3:return s=e.sent,e.next=6,s.json();case 6:return i=e.sent,e.next=9,this.fillForecast(i,t);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),r(e.t0),e.abrupt("return");case 16:n();case 17:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()}]),e}(),fe=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this,"Yr")).icons={clearsky:re.clear_sky_day,cloudy:re.cloudy,fair:re.nearly_clear_sky_day,fog:re.fog,heavyrain:re.heavy_rain,heavyrainandthunder:re.thunder,heavyrainshowers:re.heavy_rain,heavyrainshowersandthunder:re.thunder,heavysleet:re.heavy_sleet,heavysleetandthunder:re.thunder,heavysleetshowers:re.heavy_sleet,heavysleetshowersandthunder:re.thunder,heavysnow:re.snow,heavysnowandthunder:re.thunder,heavysnowshowers:re.snow,heavysnowshowersandthunder:re.thunder,lightrain:re.light_rain,lightrainandthunder:re.thunder,lightrainshowers:re.light_rain,lightrainshowersandthunder:re.thunder,lightsleet:re.light_sleet,lightsleetandthunder:re.thunder,lightsleetshowers:re.light_sleet,lightsnow:re.snow,lightsnowandthunder:re.thunder,lightsnowshowers:re.snow,lightssleetshowersandthunder:re.thunder,lightssnowshowersandthunder:re.thunder,partlycloudy:re.half_clear_sky_day,rain:re.moderate_rain,rainandthunder:re.thunder,rainshowers:re.moderate_rain,rainshowersandthunder:re.thunder,sleet:re.moderate_sleet,sleetandthunder:re.thunder,sleetshowers:re.moderate_sleet,sleetshowersandthunder:re.thunder,snow:re.snow,snowandthunder:re.thunder,snowshowers:re.snow,snowshowersandthunder:re.thunder},e}return Object(i.a)(a,[{key:"toNight",value:function(e,t){var a=t.getHours();if(a>15||a<8)switch(e){case re.clear_sky_day:return re.clear_sky_night;case re.half_clear_sky_day:return re.half_clear_sky_night;case re.nearly_clear_sky_day:return re.nearly_clear_sky_night}return e}},{key:"requestData",value:function(){var e=Object(U.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.met.no/weatherapi/locationforecast/2.0/complete?lat="+t+"&lon="+a);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Weather response error! status: "+n.status);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"fillForecast",value:function(e,t){for(var a=e.properties.timeseries,n=0,r=0;n<t.hours.length&&r<a.length;){var s=a[r],i=new Date(s.time);if(t.hours[n].date<i)n++;else if(t.hours[n].date>i)r++;else{var c=t.hours[n].weather[this.name],o=void 0,u=void 0;if(s.data.next_1_hours)o=s.data.next_1_hours.summary.symbol_code,u=s.data.next_1_hours.details.precipitation_amount;else if(s.data.next_6_hours)o=s.data.next_6_hours.summary.symbol_code,u=s.data.next_6_hours.details.precipitation_amount;else{if(!s.data.next_12_hours)continue;o=s.data.next_12_hours.summary.symbol_code,u=s.data.next_12_hours.details.precipitation_amount}o=o.split("_")[0];var l=this.toNight(this.icons[o]||re.unknown,i);l===re.unknown&&console.warn("Unknown symbol",o),c.temperature=s.data.instant.details.air_temperature,c.wind=s.data.instant.details.wind_speed,c.gust=s.data.instant.details.wind_speed_of_gust,c.precipitation=u,c.precipitationUnit="mm",c.symbol=l,r++,n++}}r=0;for(var h=0;h<t.days.length;h++)for(var d=t.days[h],p=0;p<d.spans.length&&!(r>=a.length);p++){var f=d.spans[p],m=a[r],v=new Date(m.time);if(!(f.startDate<v))if(f.startDate>v)r++,p--;else{var g=f.weather[this.name],j=(f.endDate.getTime()-f.startDate.getTime())/36e5,b=void 0,y=void 0,_=void 0,w=void 0;if(6===j)b=m.data.next_6_hours.summary.symbol_code,y=m.data.next_6_hours.details.precipitation_amount,_=m.data.next_6_hours.details.air_temperature_min,w=m.data.next_6_hours.details.air_temperature_max;else{if(12!==j){console.warn("Unknown span length",j),r++;continue}var O=a[r+1];b=m.data.next_12_hours.summary.symbol_code;var x=m.data.next_6_hours.details.precipitation_amount,k=O.data.next_6_hours.details.precipitation_amount;y=Math.round((x+k)/12*10)/10,_=Math.min(m.data.next_6_hours.details.air_temperature_min,O.data.next_6_hours.details.air_temperature_min),w=Math.max(m.data.next_6_hours.details.air_temperature_max,O.data.next_6_hours.details.air_temperature_max)}b=b.split("_")[0];var N=this.toNight(this.icons[b]||re.unknown,v);N===re.unknown&&console.warn("Unknown symbol",b),g.temperature=(w+_)/2,g.temperatureMax=w,g.temperatureMin=_,g.wind=m.data.instant.details.wind_speed,g.gust=m.data.instant.details.wind_speed_of_gust,g.precipitation=y,g.precipitationUnit="mm/h",g.symbol=N,r++}}}}]),a}(pe),me=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this,"SMHI")).icons={1:re.clear_sky_day,2:re.nearly_clear_sky_day,3:re.half_clear_sky_day,4:re.half_clear_sky_day,5:re.cloudy,6:re.cloudy,7:re.fog,8:re.light_rain,9:re.moderate_rain,10:re.heavy_rain,11:re.thunder,12:re.light_sleet,13:re.moderate_sleet,14:re.heavy_sleet,15:re.snow,16:re.snow,17:re.snow,18:re.light_rain,19:re.moderate_rain,20:re.heavy_rain,21:re.thunder,22:re.light_sleet,23:re.moderate_sleet,24:re.heavy_sleet,25:re.snow,26:re.snow,27:re.snow},e}return Object(i.a)(a,[{key:"getIcon",value:function(e,t){var a=this.icons[e];if(!a)return console.warn("Unknown symbol value",e),re.unknown;var n=t.getHours();if(n>15||n<8)switch(a){case re.clear_sky_day:return re.clear_sky_night;case re.half_clear_sky_day:return re.half_clear_sky_night;case re.nearly_clear_sky_day:return re.nearly_clear_sky_night}return a}},{key:"requestData",value:function(){var e=Object(U.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 9,e.next=3,fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+a.substr(0,9)+"/lat/"+t.substr(0,9)+"/data.json");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Weather response error! status: ' + result.status");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"fillForecast",value:function(e,t){for(var a=e.timeSeries,n=0,r=0;n<t.hours.length&&r<a.length;){var s=a[r],i=new Date(s.validTime);if(t.hours[n].date<i)n++;else if(t.hours[n].date>i)r++;else{var c=s.parameters,o=t.hours[n].weather[this.name];o.temperature=c.find((function(e){return"t"===e.name})).values[0],o.precipitation=c.find((function(e){return"pmean"===e.name})).values[0],o.precipitationUnit="mm",o.wind=c.find((function(e){return"ws"===e.name})).values[0],o.gust=c.find((function(e){return"gust"===e.name})).values[0],o.symbol=this.getIcon(c.find((function(e){return"Wsymb2"===e.name})).values[0],i),n++,r++}}r=0;for(var u=0;u<t.days.length;u++)for(var l=t.days[u],h=0;h<l.spans.length;h++){var d=l.spans[h],p=a[r],f=new Date(p.validTime);if(!(d.startDate<f))if(d.startDate>f)r++,h--;else{var m=d.weather[this.name],v=new Date((d.startDate.getTime()+d.endDate.getTime())/2);r=this.sumWeather(a,r,d.endDate,v,m)}}}},{key:"sumWeather",value:function(e,t,a,n,r){for(var s=t,i=0,c=NaN,o=NaN,u=0,l=0,h={};s<e.length;){var d=e[s];if(new Date(d.validTime)>a){s--;break}var p=d.parameters;i+=p.find((function(e){return"pmean"===e.name})).values[0];var f=p.find((function(e){return"t"===e.name})).values[0];(isNaN(c)||f<c)&&(c=f),(isNaN(o)||f>o)&&(o=f);var m=p.find((function(e){return"ws"===e.name})).values[0];m>u&&(u=m);var v=p.find((function(e){return"gust"===e.name})).values[0];v>l&&(l=v);var g=p.find((function(e){return"Wsymb2"===e.name})).values[0];g in h?h[g]+=1:h[g]=1,s++}var j=s-t+1;r.precipitation=Math.round(10*i/j)/10,r.precipitationUnit="mm/h",r.temperatureMax=o,r.temperatureMin=c,r.temperature=(o+c)/2,r.wind=u,r.gust=l;var b=0,y="";for(var _ in h){var w=h[_];w>b&&(b=w,y=_)}return r.symbol=this.getIcon(y,n),s}}]),a}(pe),ve=[new me,new fe];function ge(e,t){var a=je(e),n=ve.length,r=function(){0===--n&&t.onSuccess(a)},s=function(e){t.onError(e.message)};ve.forEach((function(t){t.fetchForecast(a,e,r,s)}))}function je(e){var t=new Date;return{hours:le(24).map((function(e){return{date:e,weather:ye()}})),days:(t,he(8).map((function(e,t){var a=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDate();return{spans:t<=4?[{startDate:new Date(Date.UTC(a,n,r,0)),endDate:new Date(Date.UTC(a,n,r,6)),weather:ye()},{startDate:new Date(Date.UTC(a,n,r,6)),endDate:new Date(Date.UTC(a,n,r,12)),weather:ye()},{startDate:new Date(Date.UTC(a,n,r,12)),endDate:new Date(Date.UTC(a,n,r,18)),weather:ye()},{startDate:new Date(Date.UTC(a,n,r,18)),endDate:new Date(Date.UTC(a,n,r,24)),weather:ye()}]:[{startDate:new Date(Date.UTC(a,n,r,0)),endDate:new Date(Date.UTC(a,n,r,12)),weather:ye()},{startDate:new Date(Date.UTC(a,n,r,12)),endDate:new Date(Date.UTC(a,n,r,24)),weather:ye()}]}}))),providers:be(),location:e||{country:"",name:"",lat:NaN,long:NaN,alt:NaN}}}function be(){return ve.map((function(e){return e.name}))}function ye(){var e={};return be().forEach((function(t){e[t]={temperature:NaN,temperatureMax:NaN,temperatureMin:NaN,wind:NaN,gust:NaN,precipitation:NaN,precipitationUnit:"",symbol:re.unknown}})),e}function _e(e){return{type:oe,forecast:e}}function we(e){return{type:ue,errorMessage:e}}var Oe=function(e){return function(){var t=Object(U.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={onSuccess:function(e){return a(_e(e))},onError:function(e){return a(we(e))}},a({type:ce}),ge(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xe=(a(237),function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"onLocationSelect",value:function(e){var t;e.country!==(null===(t=this.props.selectedLocation)||void 0===t?void 0:t.country)&&(this.props.selectLocation(e),this.props.fetchForecasts(e)),this.props.onSelect()}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"location-list",children:[this.props.showUserLocation&&this.props.userLocation&&Object(h.jsxs)(l.a.Fragment,{children:[Object(h.jsx)(ie,{location:this.props.userLocation,onSelect:function(t){return e.onLocationSelect(t)}}),Object(h.jsx)(g.a,{style:{margin:0}})]}),this.props.locationResults.map((function(t,a){return Object(h.jsxs)(l.a.Fragment,{children:[Object(h.jsx)(ie,{location:t,onSelect:function(t){return e.onLocationSelect(t)}}),Object(h.jsx)(g.a,{style:{margin:0}})]},a)}))]})}}]),a}(l.a.Component));var ke=Object(f.b)((function(e){return{userLocation:e.locationSearch.userLocation,locationResults:e.locationSearch.geocodeResults,selectedLocation:e.locationSearch.selectedLocation}}),(function(e){return{selectLocation:function(t){return e(function(e){return{type:q,location:e}}(t))},fetchForecasts:function(t){return e(Oe(t))}}}))(xe),Ne=(a(238),function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showUserPosition:!0},n}return Object(i.a)(a,[{key:"onChange",value:function(e){this.props.searchLocations(e);var t=0==e.length;t!==this.state.showUserPosition&&this.setState(Object(T.a)(Object(T.a)({},this.state),{},{showUserPosition:t}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"search",children:[Object(h.jsxs)("div",{className:"search-bar",children:[Object(h.jsx)(L.a,{className:"search-input",size:"large",bordered:!1,placeholder:"S\xf6k",autoFocus:!0,allowClear:!0,prefix:Object(h.jsx)(M.a,{}),onChange:function(t){return e.onChange(t.target.value)}}),Object(h.jsx)(D.a,{className:"search-cancel-button",size:"large",ghost:!0,onClick:function(){return e.props.close()},children:"Avbryt"})]}),Object(h.jsx)(g.a,{style:{margin:0}}),this.props.isLoading?Object(h.jsx)(x.a,{className:"location-search-spin"}):Object(h.jsx)(ke,{onSelect:function(){return e.props.close()},showUserLocation:this.state.showUserPosition})]})}}]),a}(l.a.Component));var Se=Object(f.b)((function(e){return{isLoading:e.locationSearch.geocodeIsLoading}}),(function(e){return{searchLocations:function(t){return e((a=t,function(){var e=Object(U.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={onSuccess:function(e){return t({type:J,results:e})},onAbort:function(){return t(ae(""))}},t({type:z}),R(a,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a}}}))(Ne),Te=a(250),Le=(a(239),a(240),a(241),p.a.Title),De=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"header-container",children:[Object(h.jsxs)("div",{className:"header-grid",children:[Object(h.jsx)(Le,{className:"header-title",level:5,children:this.props.title}),this.props.backButton&&Object(h.jsx)(D.a,{className:"header-back-button",onClick:function(){return e.props.backButton?e.props.backButton():{}},size:"large",ghost:!0,children:this.props.backButtonName})]}),Object(h.jsx)(g.a,{className:"header-divider"})]})}}]),a}(l.a.Component),Me=a(247),Ce=a(248),Ee=a(249),Ue="UPDATE_THEME_MODE",Fe="UPDATE_SYSTEM_THEME",Ie="UPDATE_SETTING";var Re=p.a.Text,Ae=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"onThemeChange",value:function(e){switch(e){case 1:this.props.updateThemeMode("light");break;case 2:this.props.updateThemeMode("dark");break;case 3:this.props.updateThemeMode("system")}}},{key:"render",value:function(){var e,t=this;switch(this.props.theme){case"light":e=1;break;case"dark":e=2;break;case"system":e=3}return Object(h.jsxs)("div",{className:"settings-page",children:[Object(h.jsx)(De,{title:"Inst\xe4llningar",backButton:function(){return t.props.close()},backButtonName:"Klar"}),Object(h.jsxs)("div",{className:"settings-content",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(Re,{className:"settings-options-title",type:"secondary",strong:!0,children:"Utseende"}),Object(h.jsx)(g.a,{}),Object(h.jsx)(Me.a.Group,{className:"settings-options",value:e,onChange:function(e){return t.onThemeChange(e.target.value)},children:Object(h.jsxs)(Ce.b,{direction:"vertical",children:[Object(h.jsx)(Me.a,{value:1,children:"Ljust"}),Object(h.jsx)(g.a,{}),Object(h.jsx)(Me.a,{value:2,children:"M\xf6rkt"}),Object(h.jsx)(g.a,{}),Object(h.jsx)(Me.a,{value:3,children:"F\xf6lj System"})]})}),Object(h.jsx)(g.a,{}),Object(h.jsx)(Re,{className:"settings-options-title",type:"secondary",strong:!0,children:"V\xe4der"}),Object(h.jsx)(g.a,{}),Object(h.jsx)("div",{className:"settings-options",children:Object(h.jsxs)(Ce.b,{direction:"vertical",children:[Object(h.jsxs)("div",{className:"settings-row",children:[Object(h.jsx)(Re,{children:"Visa min/max temperatur"}),Object(h.jsx)(Ee.a,{checked:this.props.showMinMaxTemp,onChange:function(e){return t.props.updateSettings({showMinMaxTemp:e})}})]}),Object(h.jsx)(g.a,{}),Object(h.jsxs)("div",{className:"settings-row",children:[Object(h.jsx)(Re,{children:"Visa byvind"}),Object(h.jsx)(Ee.a,{checked:this.props.showGust,onChange:function(e){return t.props.updateSettings({showGust:e})}})]})]})}),Object(h.jsx)(g.a,{})]}),Object(h.jsx)("a",{id:"privacy-policy",href:"https://regnkollen.se/privacy-policy.html",target:"_blank",children:"privacy policy"})]})]})}}]),a}(l.a.Component);var Ge=Object(f.b)((function(e){return{theme:e.settings.themeMode,showGust:e.settings.showGust,showMinMaxTemp:e.settings.showMinMaxTemp}}),(function(e){return{updateThemeMode:function(t){return e({type:Ue,themeMode:t})},updateSettings:function(t){return e(function(e){return{type:Ie,setting:e}}(t))}}}))(Ae),Pe=p.a.Title,He=function(e){Object(c.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showLocationSearch:!1,showSettingsPage:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchForecasts(this.props.selectedLocation),this.props.findUserPosition((function(t){t.name!==e.props.selectedLocation.name&&(e.props.fetchForecasts(t),e.props.selectUserLocation())})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){var a=t.matches?"dark":"light";e.props.updateSystemTheme(a)}))}},{key:"openLocationSearch",value:function(){this.setState({showLocationSearch:!0})}},{key:"closeLocationSearch",value:function(){this.setState({showLocationSearch:!1})}},{key:"openSettingsSearch",value:function(){this.setState({showSettingsPage:!0})}},{key:"closeSettingsSearch",value:function(){this.setState({showSettingsPage:!1})}},{key:"render",value:function(){var e,t=this;return Object(h.jsxs)(l.a.Fragment,{children:[Object(h.jsxs)("div",{className:"weather-page",style:{height:0,overflow:this.state.showLocationSearch||this.state.showSettingsPage?"hidden":"unset"},children:[Object(h.jsxs)("div",{className:"button-container",children:[Object(h.jsx)(D.a,{className:"settings-button",ghost:!0,icon:Object(h.jsx)(Te.a,{}),shape:"circle",size:"large",onClick:function(){return t.openSettingsSearch()}}),Object(h.jsx)(D.a,{className:"search-location-button",ghost:!0,icon:Object(h.jsx)(M.a,{}),shape:"circle",size:"large",onClick:function(){return t.openLocationSearch()}})]}),Object(h.jsx)(Pe,{className:"title",style:{fontWeight:1,fontSize:50},children:null===(e=this.props.selectedLocation)||void 0===e?void 0:e.name}),Object(h.jsx)(S,{})]}),this.state.showLocationSearch&&Object(h.jsx)(Se,{close:function(){return t.closeLocationSearch()}}),this.state.showSettingsPage&&Object(h.jsx)(Ge,{close:function(){return t.closeSettingsSearch()}})]})}}]),a}(l.a.Component);var We=Object(f.b)((function(e){return{selectedLocation:e.locationSearch.selectedLocation}}),(function(e){return{findUserPosition:function(t){return e((a=t,function(){var e=Object(U.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={onSuccess:function(e){t(ne(e)),a&&a(e)},onError:function(){return t(ae(""))}},t({type:X}),$(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},selectUserLocation:function(){return e({type:B})},fetchForecasts:function(t){return e(Oe(t))},updateSystemTheme:function(t){return e(function(e){return{type:Fe,systemTheme:e}}(t))}}}))(He);var qe=function(){return Object(h.jsx)("div",{id:"app",children:Object(h.jsx)("div",{id:"page",children:Object(h.jsx)(We,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be=a(61),ze=a(117),Je=a(120);function Ve(e,t,a){var n;n=a?"; max-age="+a:"",document.cookie=e+"="+encodeURI(t)+n+"; SameSite=Strict; path=/"}function Xe(e){for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var n=t[a].trim().split("="),r=Object(Je.a)(n,2),s=r[0],i=r[1];if(s===e)return decodeURI(i)}return null}var Ye={selectedLocation:function(){var e=Xe("weather-location");if(null!==e)try{return JSON.parse(e)}catch(t){}return{name:"Stockholm",country:"Sverige",lat:59.33066,long:18.06855,alt:10}}(),geocodeResults:[],geocodeIsLoading:!1,geocodeErrorMessage:"",userLocation:void 0,userLocationIsLoading:!1,userLocationErrorMessage:""};function Ke(e){Ve("weather-location",JSON.stringify(e),31536e3)}var $e={forecast:je(void 0),isLoading:!0,errorMessage:void 0};var Qe="theme-mode",Ze={themeMode:Xe(Qe)||"system",systemTheme:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",theme:"light",showGust:"true"===Xe("show-gust"),showMinMaxTemp:"true"===Xe("show-min-max-temp")};function et(e){var t="dark";"dark"===e?document.documentElement.classList.add(t):document.documentElement.classList.remove(t)}!function(){var e;switch(Ze.themeMode){case"light":e="light";break;case"dark":e="dark";break;case"system":e=Ze.systemTheme}et(e)}();var tt=Object(Be.b)({locationSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Ke(t.location),Object(T.a)(Object(T.a)({},e),{},{selectedLocation:t.location});case B:return e.userLocation?(Ke(e.userLocation),Object(T.a)(Object(T.a)({},e),{},{selectedLocation:e.userLocation})):Object(T.a)({},e);case z:return Object(T.a)(Object(T.a)({},e),{},{geocodeIsLoading:!0});case J:return Object(T.a)(Object(T.a)({},e),{},{geocodeIsLoading:!1,geocodeResults:t.results,geocodeErrorMessage:""});case V:return Object(T.a)(Object(T.a)({},e),{},{geocodeIsLoading:!1,geocodeResults:[],geocodeErrorMessage:t.errorMessage});case X:return Object(T.a)(Object(T.a)({},e),{},{userLocationIsLoading:!0});case Y:return Object(T.a)(Object(T.a)({},e),{},{userLocationIsLoading:!1,userLocation:t.location});case K:return Object(T.a)(Object(T.a)({},e),{},{userLocationIsLoading:!1,userLocationErrorMessage:t.errorMessage});default:return e}},forecasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(T.a)(Object(T.a)({},e),{},{isLoading:!0});case oe:return Object(T.a)(Object(T.a)({},e),{},{forecast:t.forecast,isLoading:!1,errorMessage:void 0});case ue:return Object(T.a)(Object(T.a)({},e),{},{isLoading:!1,errorMessage:t.errorMessage});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:var a;switch(t.themeMode){case"light":a="light";break;case"dark":a="dark";break;case"system":a=e.systemTheme}return et(a),Ve(Qe,t.themeMode,31536e3),Object(T.a)(Object(T.a)({},e),{},{themeMode:t.themeMode,theme:a});case Fe:return"system"===e.themeMode&&et(t.systemTheme),Object(T.a)(Object(T.a)({},e),{},{systemTheme:t.systemTheme});case Ie:return void 0!==t.setting.showGust&&Ve("show-gust",t.setting.showGust.toString(),31536e3),void 0!==t.setting.showMinMaxTemp&&Ve("show-min-max-temp",t.setting.showMinMaxTemp.toString(),31536e3),Object(T.a)(Object(T.a)({},e),t.setting);default:return e}}}),at=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Be.c,nt=Object(Be.d)(tt,{},Object(Be.c)(Object(Be.a)(ze.a),at()));r.a.render(Object(h.jsx)(f.a,{store:nt,children:Object(h.jsx)(qe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[242,1,2]]]);
//# sourceMappingURL=main.aa96ff26.chunk.js.map