(this.webpackJsonprainstorm=this.webpackJsonprainstorm||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},138:function(e,t,n){},213:function(e,t,n){var r={"./clear_sky_day.svg":214,"./clear_sky_night.svg":215,"./cloudy.svg":216,"./fog.svg":217,"./half_clear_sky_day.svg":218,"./half_clear_sky_night.svg":219,"./heavy_rain.svg":220,"./heavy_sleet.svg":221,"./light_rain.svg":222,"./light_sleet.svg":223,"./moderate_rain.svg":224,"./moderate_sleet.svg":225,"./nearly_clear_sky_day.svg":226,"./nearly_clear_sky_night.svg":227,"./overcast.svg":228,"./snow.svg":229,"./sunrise.svg":230,"./sunset.svg":231,"./thunder.svg":232,"./unknown.svg":233};function a(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=s,e.exports=a,a.id=213},214:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/clear_sky_day.08d2252c.svg"},215:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/clear_sky_night.529a641f.svg"},216:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/cloudy.b1731609.svg"},217:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/fog.fdf19a8b.svg"},218:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/half_clear_sky_day.89d8c1b7.svg"},219:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/half_clear_sky_night.75572318.svg"},220:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/heavy_rain.3366fbb7.svg"},221:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/heavy_sleet.fa0fb9d8.svg"},222:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/light_rain.920a6452.svg"},223:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/light_sleet.ae8a3066.svg"},224:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/moderate_rain.2a623bba.svg"},225:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/moderate_sleet.7758da5c.svg"},226:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/nearly_clear_sky_day.36e650c9.svg"},227:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/nearly_clear_sky_night.e9c1247d.svg"},228:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/overcast.a2822c8c.svg"},229:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/snow.9758315a.svg"},230:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/sunrise.0598d674.svg"},231:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/sunset.dacbfc7d.svg"},232:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/thunder.31fc6f06.svg"},233:function(e,t,n){"use strict";n.r(t),t.default=n.p+"static/media/unknown.791c8f32.svg"},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var r=n(20),a=n.n(r),s=(n(133),n(134),n(16)),o=n(23),i=n(24),c=n(29),u=n(28),l=n(0),d=n.n(l),h=(n(135),n(136),n(4)),m=function(e){return Object(h.jsx)("div",{className:"paper",style:e.style,children:e.children})},p=n(252),f=(n(138),n(32)),v=p.a.Text;var g=Object(f.b)((function(e){return{showGust:e.settings.showGust,showMinMaxTemp:e.settings.showMinMaxTemp}}))((function(e){return Object(h.jsx)("div",{className:"weather_cell",children:void 0!==e.weather&&Object(h.jsxs)(d.a.Fragment,{children:[isNaN(e.weather.temperature)?Object(h.jsx)(v,{children:" "}):!e.showMinMaxTemp||isNaN(e.weather.temperatureMin)||isNaN(e.weather.temperatureMax)?Object(h.jsxs)(v,{strong:!0,children:[Math.round(e.weather.temperature)," \xb0C"]}):Object(h.jsxs)("div",{children:[Object(h.jsx)(v,{strong:!0,className:"minimum",children:Math.round(e.weather.temperatureMin)}),Object(h.jsx)(v,{type:"secondary",style:{marginLeft:"1px",marginRight:"1px"},children:"/"}),Object(h.jsx)(v,{strong:!0,className:"maximum",children:Math.round(e.weather.temperatureMax)}),Object(h.jsx)(v,{strong:!0,children:" \xb0C"})]}),e.weather.symbol&&Object(h.jsx)("img",{className:"weather_symbol",alt:"",src:n(213)("./"+e.weather.symbol+".svg").default}),Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:isNaN(e.weather.wind)?Object(h.jsx)(v,{children:" "}):e.showGust&&!isNaN(e.weather.gust)?Object(h.jsxs)(d.a.Fragment,{children:[Object(h.jsx)(v,{type:"secondary",children:Math.round(e.weather.wind)}),Object(h.jsx)(v,{className:"maximum",type:"secondary",style:{marginLeft:"1px",marginRight:"1px"},children:"("+Math.round(e.weather.gust)+")"}),Object(h.jsx)(v,{type:"secondary",children:"m/s"})]}):Object(h.jsxs)(v,{type:"secondary",children:[Math.round(e.weather.wind)," m/s"]})}),isNaN(e.weather.precipitation)?Object(h.jsx)("div",{children:Object(h.jsx)(v,{children:" "})}):Object(h.jsx)(v,{type:"secondary",children:e.weather.precipitation+" "+e.weather.precipitationUnit})]})]})})})),j=n(249),b=(n(234),p.a.Text),y=function(e){return Object(h.jsx)("div",{className:"time_cell",children:Object(h.jsx)(b,{strong:!0,children:e.time})})},w=(n(235),p.a.Title),O=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)(w,{level:4,children:this.props.name}),Object(h.jsxs)("div",{className:"columns",children:[Object(h.jsx)("div",{className:"right-column",children:Object(h.jsx)("div",{className:"time-row",style:{width:"100%"},children:Object(h.jsx)(m,{style:{width:"100%",height:"100%"}})})}),Object(h.jsxs)("div",{className:"all-columns",children:[Object(h.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(h.jsx)("div",{className:"weather-row",children:Object(h.jsx)(m,{style:{width:"100%",height:"100%"}})},t)}))]}),Object(h.jsxs)("div",{className:"left-column",children:[Object(h.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(h.jsx)("div",{className:"weather-row",children:Object(h.jsx)(p.a,{className:"weather-provider-name",children:e})},t)}))]}),Object(h.jsxs)("div",{className:"divider-column",children:[Object(h.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(h.jsx)("div",{className:"weather-row",children:Object(h.jsx)(j.a,{type:"vertical",style:{height:"calc(100% - 5px)",margin:0}})},t)}))]}),Object(h.jsxs)("div",{className:"right-column",style:{overflowX:"auto"},children:[Object(h.jsx)("div",{className:"time-row",style:{justifyContent:"space-around"},children:this.props.tableData.map((function(e,t){return Object(h.jsx)(y,{time:x(e)},t)}))}),this.props.providers.map((function(t,n){return Object(h.jsx)("div",{className:"weather-row",style:{justifyContent:"space-around"},children:e.props.tableData.map((function(e,n){return Object(h.jsx)(g,{weather:e.weather[t]},n)}))},n)}))]})]})]})}}]),n}(d.a.Component);function x(e){var t=e;return t.date?("0"+t.date.getHours()).slice(-2):t.startDate&&t.endDate?("0"+t.startDate.getHours()).slice(-2)+"\u2014"+("0"+t.endDate.getHours()).slice(-2):""}var _=O,k=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getTableName",value:function(e,t){var n="";if(!t)return n;switch(n=0===e?"Idag, ":"",t.getDay()){case 1:n+="M\xe5ndag";break;case 2:n+="Tisdag";break;case 3:n+="Onsdag";break;case 4:n+="Torsdag";break;case 5:n+="Fredag";break;case 6:n+="L\xf6rdag";break;case 0:n+="S\xf6ndag"}return n}},{key:"render",value:function(){for(var e=this,t=[],n=0;n<this.props.forecast.days.length-1;n+=2)t.push([this.props.forecast.days[n],this.props.forecast.days[n+1]]);return Object(h.jsxs)("div",{className:"list",children:[Object(h.jsx)(_,{tableData:this.props.forecast.hours,providers:this.props.forecast.providers,name:this.getTableName(0,this.props.forecast.hours[0].date)}),t.map((function(t,n){return Object(h.jsx)("div",{className:"weather-table-pair",children:t.map((function(t,r){return Object(h.jsx)(_,{tableData:t.spans,providers:e.props.forecast.providers,name:e.getTableName(n+r+1,t.spans[0].startDate)},r)}))},n)}))]})}}]),n}(d.a.Component);var N,S=Object(f.b)((function(e){return{forecast:e.forecasts.forecast,isLoading:e.forecasts.isLoading,selectedLocation:e.locationSearch.selectedLocation}}))(k),T=n(253),D=n(122),L=n(250),C=n(127),E=n(15),M=n.n(E),U=n(25),F=n(118),I=0;function R(e,t){var n=e.trim();if(n!==N){if(N=n,""===n)return t.onSuccess([]),void I++;var r=++I;setTimeout((function(){return function(e,t,n){return G.apply(this,arguments)}(r,n,t)}),500)}}function W(e){return e!==I}function H(e){return P.apply(this,arguments)}function P(){return(P=Object(U.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://api.locationiq.com/v1/autocomplete.php",e.abrupt("return",fetch("".concat("https://api.locationiq.com/v1/autocomplete.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&q=").concat(t,"&viewbox=3,44,32,71&limit=20&dedupe=1&accept-language=sv")));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){var t,n=[],r=Object(F.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push({country:a.display_address,name:a.display_place,lat:Number(a.lat),long:Number(a.lon),alt:0})}}catch(s){r.e(s)}finally{r.f()}return n}function G(){return(G=Object(U.a)(M.a.mark((function e(t,n,r){var a,s,o,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,H(n);case 4:if(a=e.sent,!W(t)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,a.json();case 9:if(s=e.sent,!W(t)){e.next=12;break}return e.abrupt("return");case 12:a.ok?(o=A(s),r.onSuccess(o)):"Unable to geocode"===s.error?(i=[],r.onSuccess(i)):(console.warn("Geocode response error!",a.statusText),r.onAbort());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B="SELECT_LOCATION",V="GEOCODE_START",z="GEOCODE_SUCCESS",J="GEOCODE_FAILURE";function q(e){return{type:B,location:e}}n(236);var Y,K=p.a.Text,X=function(e){return Object(h.jsxs)("button",{className:"location-list-item",onClick:function(){return e.onSelect(e.location)},children:[Object(h.jsx)(K,{strong:!0,children:e.location.name}),Object(h.jsx)(K,{type:"secondary",children:e.location.country})]})},$="FORECAST_FETCH_START",Q="FORECAST_FETCH_SUCCESS",Z="FORECAST_FETCH_FAILURE";function ee(e){var t=new Date;return t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),ne(t,36e5,e)}function te(e){var t=new Date;return t.setDate(t.getDate()+1),ne(t,864e5,e)}function ne(e,t,n){for(var r=[],a=0;a<n;a++)r.push(new Date(e.getTime()+a*t));return r}function re(e){var t=new Date;return{sunTimes:{sunrise:new Date,sunset:new Date},hours:ee(24).map((function(e){return{date:e,weather:ae()}})),days:(t,te(8).map((function(e,t){var n=e.getUTCFullYear(),r=e.getUTCMonth(),a=e.getUTCDate();return{spans:t<=4?[{startDate:new Date(Date.UTC(n,r,a,0)),endDate:new Date(Date.UTC(n,r,a,6)),weather:ae()},{startDate:new Date(Date.UTC(n,r,a,6)),endDate:new Date(Date.UTC(n,r,a,12)),weather:ae()},{startDate:new Date(Date.UTC(n,r,a,12)),endDate:new Date(Date.UTC(n,r,a,18)),weather:ae()},{startDate:new Date(Date.UTC(n,r,a,18)),endDate:new Date(Date.UTC(n,r,a,24)),weather:ae()}]:[{startDate:new Date(Date.UTC(n,r,a,0)),endDate:new Date(Date.UTC(n,r,a,12)),weather:ae()},{startDate:new Date(Date.UTC(n,r,a,12)),endDate:new Date(Date.UTC(n,r,a,24)),weather:ae()}]}}))),providers:ve(),location:e||{country:"",name:"",lat:NaN,long:NaN,alt:NaN}}}function ae(){var e={};return ve().forEach((function(t){e[t]={temperature:NaN,temperatureMax:NaN,temperatureMin:NaN,wind:NaN,gust:NaN,precipitation:NaN,precipitationUnit:"",symbol:Y.unknown}})),e}function se(e,t){return oe.apply(this,arguments)}function oe(){return(oe=Object(U.a)(M.a.mark((function e(t,n){var r,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.met.no/weatherapi/sunrise/2.0/.json",r=(new Date).toISOString().split("T")[0],a="https://api.met.no/weatherapi/sunrise/2.0/.json?lat="+t.lat+"&lon="+t.long+"&date="+r+"&offset=00:00",e.next=5,fetch(a);case 5:if(!(s=e.sent).ok){e.next=15;break}return e.t0=ie,e.next=10,s.json();case 10:e.t1=e.sent,e.t2=n,(0,e.t0)(e.t1,e.t2),e.next=16;break;case 15:n.onError(new Error);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e,t){try{var n={sunrise:new Date(e.location.time[0].sunrise.time),sunset:new Date(e.location.time[0].sunset.time)};t.onSuccess(n)}catch(r){t.onError(r)}}function ce(e,t){var n=de(e),r=de(t.sunrise),a=de(t.sunset);return r>n||n>a}function ue(e,t,n){return ce(new Date((e.getTime()+t.getTime())/2),n)}function le(e){switch(e){case Y.clear_sky_day:return Y.clear_sky_night;case Y.half_clear_sky_day:return Y.half_clear_sky_night;case Y.nearly_clear_sky_day:return Y.nearly_clear_sky_night}return e}function de(e){return 60*e.getHours()*60+60*e.getMinutes()+e.getSeconds()+1e3*e.getMilliseconds()}!function(e){e.unknown="unknown",e.clear_sky_day="clear_sky_day",e.clear_sky_night="clear_sky_night",e.nearly_clear_sky_day="nearly_clear_sky_day",e.nearly_clear_sky_night="nearly_clear_sky_night",e.half_clear_sky_day="half_clear_sky_day",e.half_clear_sky_night="half_clear_sky_night",e.cloudy="cloudy",e.light_rain="light_rain",e.moderate_rain="moderate_rain",e.heavy_rain="heavy_rain",e.light_sleet="light_sleet",e.moderate_sleet="moderate_sleet",e.heavy_sleet="heavy_sleet",e.snow="snow",e.thunder="thunder",e.fog="fog"}(Y||(Y={}));var he=function(){function e(t){Object(o.a)(this,e),this.name=void 0,this.responseJson=void 0,this.name=t}return Object(i.a)(e,[{key:"canFillForecast",value:function(){return void 0!==this.responseJson}},{key:"fetchForecast",value:function(){var e=Object(U.a)(M.a.mark((function e(t,n,r){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestData(t.lat.toString(),t.long.toString());case 3:return a=e.sent,e.next=6,a.json();case 6:this.responseJson=e.sent,e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(0),this.responseJson=void 0,console.error(e.t0),r(e.t0),e.abrupt("return");case 15:n();case 16:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}(),me=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this,"Yr")).icons={clearsky:Y.clear_sky_day,cloudy:Y.cloudy,fair:Y.nearly_clear_sky_day,fog:Y.fog,heavyrain:Y.heavy_rain,heavyrainandthunder:Y.thunder,heavyrainshowers:Y.heavy_rain,heavyrainshowersandthunder:Y.thunder,heavysleet:Y.heavy_sleet,heavysleetandthunder:Y.thunder,heavysleetshowers:Y.heavy_sleet,heavysleetshowersandthunder:Y.thunder,heavysnow:Y.snow,heavysnowandthunder:Y.thunder,heavysnowshowers:Y.snow,heavysnowshowersandthunder:Y.thunder,lightrain:Y.light_rain,lightrainandthunder:Y.thunder,lightrainshowers:Y.light_rain,lightrainshowersandthunder:Y.thunder,lightsleet:Y.light_sleet,lightsleetandthunder:Y.thunder,lightsleetshowers:Y.light_sleet,lightsnow:Y.snow,lightsnowandthunder:Y.thunder,lightsnowshowers:Y.snow,lightssleetshowersandthunder:Y.thunder,lightssnowshowersandthunder:Y.thunder,partlycloudy:Y.half_clear_sky_day,rain:Y.moderate_rain,rainandthunder:Y.thunder,rainshowers:Y.moderate_rain,rainshowersandthunder:Y.thunder,sleet:Y.moderate_sleet,sleetandthunder:Y.thunder,sleetshowers:Y.moderate_sleet,sleetshowersandthunder:Y.thunder,snow:Y.snow,snowandthunder:Y.thunder,snowshowers:Y.snow,snowshowersandthunder:Y.thunder},e}return Object(i.a)(n,[{key:"requestData",value:function(){var e=Object(U.a)(M.a.mark((function e(t,n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.met.no/weatherapi/locationforecast/2.0/complete?lat="+t+"&lon="+n);case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Weather response error! status: "+r.status);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fillForecast",value:function(e){for(var t=this.responseJson.properties.timeseries,n=0,r=0;n<e.hours.length&&r<t.length;){var a=t[r],s=new Date(a.time);if(e.hours[n].date<s)n++;else if(e.hours[n].date>s)r++;else{var o=e.hours[n].weather[this.name],i=void 0,c=void 0;if(a.data.next_1_hours)i=a.data.next_1_hours.summary.symbol_code,c=a.data.next_1_hours.details.precipitation_amount;else if(a.data.next_6_hours)i=a.data.next_6_hours.summary.symbol_code,c=a.data.next_6_hours.details.precipitation_amount;else{if(!a.data.next_12_hours)continue;i=a.data.next_12_hours.summary.symbol_code,c=a.data.next_12_hours.details.precipitation_amount}i=i.split("_")[0];var u=this.icons[i]||Y.unknown;ce(s,e.sunTimes)&&(u=le(u)),u===Y.unknown&&console.warn("Unknown symbol",i),o.temperature=a.data.instant.details.air_temperature,o.wind=a.data.instant.details.wind_speed,o.gust=a.data.instant.details.wind_speed_of_gust,o.precipitation=c,o.precipitationUnit="mm",o.symbol=u,r++,n++}}r=0;for(var l=0;l<e.days.length;l++)for(var d=e.days[l],h=0;h<d.spans.length&&!(r>=t.length);h++){var m=d.spans[h],p=t[r],f=new Date(p.time);if(!(m.startDate<f))if(m.startDate>f)r++,h--;else{var v=m.weather[this.name],g=(m.endDate.getTime()-m.startDate.getTime())/36e5,j=void 0,b=void 0,y=void 0,w=void 0;if(6===g)j=p.data.next_6_hours.summary.symbol_code,b=p.data.next_6_hours.details.precipitation_amount,y=p.data.next_6_hours.details.air_temperature_min,w=p.data.next_6_hours.details.air_temperature_max;else{if(12!==g){console.warn("Unknown span length",g),r++;continue}var O=t[r+1];j=p.data.next_12_hours.summary.symbol_code;var x=p.data.next_6_hours.details.precipitation_amount,_=O.data.next_6_hours.details.precipitation_amount;b=Math.round((x+_)/12*10)/10,y=Math.min(p.data.next_6_hours.details.air_temperature_min,O.data.next_6_hours.details.air_temperature_min),w=Math.max(p.data.next_6_hours.details.air_temperature_max,O.data.next_6_hours.details.air_temperature_max)}j=j.split("_")[0];var k=this.icons[j]||Y.unknown;ue(m.startDate,m.endDate,e.sunTimes)&&(k=le(k)),k===Y.unknown&&console.warn("Unknown symbol",j),v.temperature=(w+y)/2,v.temperatureMax=w,v.temperatureMin=y,v.wind=p.data.instant.details.wind_speed,v.gust=p.data.instant.details.wind_speed_of_gust,v.precipitation=b,v.precipitationUnit="mm",v.symbol=k,r++}}}}]),n}(he),pe=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this,"SMHI")).icons={1:Y.clear_sky_day,2:Y.nearly_clear_sky_day,3:Y.half_clear_sky_day,4:Y.half_clear_sky_day,5:Y.cloudy,6:Y.cloudy,7:Y.fog,8:Y.light_rain,9:Y.moderate_rain,10:Y.heavy_rain,11:Y.thunder,12:Y.light_sleet,13:Y.moderate_sleet,14:Y.heavy_sleet,15:Y.snow,16:Y.snow,17:Y.snow,18:Y.light_rain,19:Y.moderate_rain,20:Y.heavy_rain,21:Y.thunder,22:Y.light_sleet,23:Y.moderate_sleet,24:Y.heavy_sleet,25:Y.snow,26:Y.snow,27:Y.snow},e}return Object(i.a)(n,[{key:"getIcon",value:function(e){var t=this.icons[e];return t||(console.warn("Unknown symbol value",e),Y.unknown)}},{key:"requestData",value:function(){var e=Object(U.a)(M.a.mark((function e(t,n){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 9,e.next=3,fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+n.substr(0,9)+"/lat/"+t.substr(0,9)+"/data.json");case 3:if((r=e.sent).ok){e.next=6;break}throw new Error("Weather response error! status: ' + result.status");case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fillForecast",value:function(e){for(var t=this.responseJson.timeSeries,n=0,r=0;n<e.hours.length&&r<t.length;){var a=t[r],s=new Date(a.validTime);if(e.hours[n].date<s)n++;else if(e.hours[n].date>s)r++;else{var o=a.parameters,i=e.hours[n].weather[this.name];i.temperature=o.find((function(e){return"t"===e.name})).values[0],i.precipitation=o.find((function(e){return"pmean"===e.name})).values[0],i.precipitationUnit="mm",i.wind=o.find((function(e){return"ws"===e.name})).values[0],i.gust=o.find((function(e){return"gust"===e.name})).values[0],i.symbol=this.getIcon(o.find((function(e){return"Wsymb2"===e.name})).values[0]),ce(s,e.sunTimes)&&(i.symbol=le(i.symbol)),n++,r++}}r=0;for(var c=0;c<e.days.length;c++)for(var u=e.days[c],l=0;l<u.spans.length;l++){var d=u.spans[l],h=t[r],m=new Date(h.validTime);if(!(d.startDate<m))if(d.startDate>m)r++,l--;else{var p=d.weather[this.name],f=new Date((d.startDate.getTime()+d.endDate.getTime())/2);r=this.sumWeather(t,r,d.endDate,f,p,e.sunTimes)}}}},{key:"sumWeather",value:function(e,t,n,r,a,s){for(var o=t,i=0,c=NaN,u=NaN,l=0,d=0,h={};o<e.length;){var m=e[o];if(new Date(m.validTime)>n){o--;break}var p=m.parameters;i+=p.find((function(e){return"pmean"===e.name})).values[0];var f=p.find((function(e){return"t"===e.name})).values[0];(isNaN(c)||f<c)&&(c=f),(isNaN(u)||f>u)&&(u=f);var v=p.find((function(e){return"ws"===e.name})).values[0];v>l&&(l=v);var g=p.find((function(e){return"gust"===e.name})).values[0];g>d&&(d=g);var j=p.find((function(e){return"Wsymb2"===e.name})).values[0];j in h?h[j]+=1:h[j]=1,o++}a.precipitation=Math.round(10*i)/10,a.precipitationUnit="mm",a.temperatureMax=u,a.temperatureMin=c,a.temperature=(u+c)/2,a.wind=l,a.gust=d;var b=0,y="";for(var w in h){var O=h[w];O>b&&(b=O,y=w)}return a.symbol=this.getIcon(y),ue(new Date(e[t].validTime),n,s)&&(a.symbol=le(a.symbol)),o}}]),n}(he),fe=[new pe,new me];function ve(){return fe.map((function(e){return e.name}))}function ge(e,t){return je.apply(this,arguments)}function je(){return(je=Object(U.a)(M.a.mark((function e(t,n){var r,a,s,o,i,c,u;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=re(t),a=!1,o=fe.length,i=[],c=function(e){a?(e.canFillForecast()&&e.fillForecast(r,s),0===--o&&n.onSuccess(r)):i.push(e)},u=function(e){s=e,a=!0,r.sunTimes=e,i.forEach((function(e){c(e)}))},se(t,{onSuccess:function(e){u(e)},onError:function(e){u({sunrise:new Date,sunset:new Date})}}),fe.forEach((function(e){e.fetchForecast(t,(function(){c(e)}),(function(t){c(e)}))}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return{type:Q,forecast:e}}var ye=function(e){return function(){var t=Object(U.a)(M.a.mark((function t(n){var r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={onSuccess:function(e){return n(be(e))}},n({type:$}),ge(e,r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},we=(n(237),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"onLocationSelect",value:function(e){var t;e.country!==(null===(t=this.props.selectedLocation)||void 0===t?void 0:t.country)&&(this.props.selectLocation(e),this.props.fetchForecasts(e)),this.props.onSelect()}},{key:"render",value:function(){var e=this,t=this.props.showHistory?this.props.locationHistory:this.props.locationResults;return Object(h.jsx)("div",{className:"location-list",children:t.map((function(t,n){return Object(h.jsxs)(d.a.Fragment,{children:[Object(h.jsx)(X,{location:t,onSelect:function(t){return e.onLocationSelect(t)}}),Object(h.jsx)(j.a,{style:{margin:0}})]},n)}))})}}]),n}(d.a.Component));var Oe=Object(f.b)((function(e){return{locationResults:e.locationSearch.geocodeResults,locationHistory:e.locationSearch.locationHistory,selectedLocation:e.locationSearch.selectedLocation}}),(function(e){return{selectLocation:function(t){return e(q(t))},fetchForecasts:function(t){return e(ye(t))}}}))(we),xe=(n(238),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={showHistory:!0},r}return Object(i.a)(n,[{key:"onChange",value:function(e){this.props.searchLocations(e);var t=0===e.length;t!==this.state.showHistory&&this.setState(Object(s.a)(Object(s.a)({},this.state),{},{showHistory:t}))}},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"search",children:[Object(h.jsxs)("div",{className:"search-bar",children:[Object(h.jsx)(T.a,{className:"search-input",size:"large",bordered:!1,placeholder:"S\xf6k",autoFocus:!0,allowClear:!0,prefix:Object(h.jsx)(C.a,{}),onChange:function(t){return e.onChange(t.target.value)}}),Object(h.jsx)(D.a,{className:"search-cancel-button",size:"large",ghost:!0,onClick:function(){return e.props.close()},children:"Avbryt"})]}),Object(h.jsx)(j.a,{style:{margin:0}}),this.props.isLoading?Object(h.jsx)(L.a,{className:"location-search-spin"}):Object(h.jsx)(Oe,{onSelect:function(){return e.props.close()},showHistory:this.state.showHistory})]})}}]),n}(d.a.Component));var _e=Object(f.b)((function(e){return{isLoading:e.locationSearch.geocodeIsLoading}}),(function(e){return{searchLocations:function(t){return e((n=t,function(){var e=Object(U.a)(M.a.mark((function e(t){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={onSuccess:function(e){return t({type:z,results:e})},onAbort:function(){return t({type:J,errorMessage:""})}},t({type:V}),R(n,r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var n}}}))(xe),ke=n(51),Ne=n(257),Se=n(258),Te=n(259),De=(n(244),n(245),n(246),p.a.Title),Le=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"header-container",children:[Object(h.jsxs)("div",{className:"header-grid",children:[Object(h.jsx)(De,{className:"header-title",level:5,children:this.props.title}),this.props.backButton&&Object(h.jsx)(D.a,{className:"header-back-button",onClick:function(){return e.props.backButton?e.props.backButton():{}},size:"large",ghost:!0,children:this.props.backButtonName})]}),Object(h.jsx)(j.a,{className:"header-divider"})]})}}]),n}(d.a.Component),Ce=n(254),Ee=n(255),Me=n(256),Ue="UPDATE_THEME_MODE",Fe="UPDATE_SYSTEM_THEME",Ie="UPDATE_SETTING";var Re=p.a.Text,We=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"onThemeChange",value:function(e){switch(e){case 1:this.props.updateThemeMode("light");break;case 2:this.props.updateThemeMode("dark");break;case 3:this.props.updateThemeMode("system")}}},{key:"render",value:function(){var e,t=this;switch(this.props.theme){case"light":e=1;break;case"dark":e=2;break;case"system":e=3}return Object(h.jsxs)("div",{className:"settings-page",children:[Object(h.jsx)(Le,{title:"Inst\xe4llningar",backButton:function(){return t.props.close()},backButtonName:"Klar"}),Object(h.jsxs)("div",{className:"settings-content",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(Re,{className:"settings-options-title",type:"secondary",strong:!0,children:"Utseende"}),Object(h.jsx)(j.a,{}),Object(h.jsx)(Ce.a.Group,{className:"settings-options",value:e,onChange:function(e){return t.onThemeChange(e.target.value)},children:Object(h.jsxs)(Ee.b,{direction:"vertical",children:[Object(h.jsx)(Ce.a,{value:1,children:"Ljust"}),Object(h.jsx)(j.a,{}),Object(h.jsx)(Ce.a,{value:2,children:"M\xf6rkt"}),Object(h.jsx)(j.a,{}),Object(h.jsx)(Ce.a,{value:3,children:"F\xf6lj System"})]})}),Object(h.jsx)(j.a,{}),Object(h.jsx)(Re,{className:"settings-options-title",type:"secondary",strong:!0,children:"V\xe4der"}),Object(h.jsx)(j.a,{}),Object(h.jsx)("div",{className:"settings-options",children:Object(h.jsxs)(Ee.b,{direction:"vertical",children:[Object(h.jsxs)("div",{className:"settings-row",children:[Object(h.jsx)(Re,{children:"Visa min/max temperatur"}),Object(h.jsx)(Me.a,{checked:this.props.showMinMaxTemp,onChange:function(e){return t.props.updateSettings({showMinMaxTemp:e})}})]}),Object(h.jsx)(j.a,{}),Object(h.jsxs)("div",{className:"settings-row",children:[Object(h.jsx)(Re,{children:"Visa byvind"}),Object(h.jsx)(Me.a,{checked:this.props.showGust,onChange:function(e){return t.props.updateSettings({showGust:e})}})]})]})}),Object(h.jsx)(j.a,{})]}),Object(h.jsx)("a",{id:"privacy-policy",href:"https://regnkollen.se/privacy-policy.html",target:"_blank",rel:"noreferrer",children:"privacy policy"})]})]})}}]),n}(d.a.Component);var He,Pe=Object(f.b)((function(e){return{theme:e.settings.themeMode,showGust:e.settings.showGust,showMinMaxTemp:e.settings.showMinMaxTemp}}),(function(e){return{updateThemeMode:function(t){return e({type:Ue,themeMode:t})},updateSettings:function(t){return e(function(e){return{type:Ie,setting:e}}(t))}}}))(We),Ae=n(251),Ge=["title","titleId"];function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}function Ve(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ze(e,t){var n=e.title,r=e.titleId,a=Ve(e,Ge);return l.createElement("svg",Be({width:"27.043mm",height:"19.318mm",viewBox:"0 0 27.043 19.318",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,He||(He=l.createElement("metadata",null,l.createElement("rdfRDF",null,l.createElement("ccWork",null,l.createElement("dcformat",null,"image/svg+xml"))))),l.createElement("g",{transform:"translate(267.35 -206.24)",fill:"currentColor"},l.createElement("path",{transform:"matrix(.5 0 0 1 -395.11 104.26)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(.5 0 0 1 -414.16 104.26)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(.35355 .35355 -.70711 .70711 -284.41 25.175)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(-.35355 .35355 -.70711 -.70711 -57.66 190.76)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{d:"m-266.53 224.75h25.4",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6203,style:{paintOrder:"normal"}}),l.createElement("path",{d:"m-253.83 215.52a5.8207 5.8208 0 0 0-5.8208 5.8208 5.8207 5.8208 0 0 0 0.22167 1.587h11.194a5.8207 5.8208 0 0 0 0.22582-1.587 5.8207 5.8208 0 0 0-5.8203-5.8208z",stroke:"currentColor",strokeLinecap:"round",strokeWidth:.79375,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{d:"m-253.84 206.24a0.81024 0.81024 0 0 0-0.56277 0.2367l-1.0583 1.0583a0.81024 0.81024 0 0 0-0.0692 0.076l-1.1958 1.1958a0.8102 0.4051 45 1 0 1.1452 1.1451l0.94207-0.94205v2.2774a0.81024 0.81024 0 0 0 0 0.0806v2.0366a0.8102 0.4051 0 1 0 1.619 0v-3.176a0.8102 0.4051 0 0 0 0-0.0201v-1.201l0.94414 0.94414a0.4051 0.8102 45 1 0 1.1452-1.1451l-1.2077-1.2077a0.81024 0.81024 0 0 0-0.0594-0.0636l-1.0583-1.0583a0.81024 0.81024 0 0 0-0.58394-0.23669z",color:"currentColor",colorRendering:"auto",dominantBaseline:"auto",imageRendering:"auto",shapeRendering:"auto","solid-color":"currentColor",style:{fontFeatureSettings:"normal",fontVariantAlternates:"normal",fontVariantCaps:"normal",fontVariantLigatures:"normal",fontVariantNumeric:"normal",fontVariantPosition:"normal",isolation:"auto",mixBlendMode:"normal",paintOrder:"markers fill stroke",shapePadding:0,textDecorationColor:"currentColor",textDecorationLine:"none",textDecorationStyle:"solid",textIndent:0,textOrientation:"mixed",textTransform:"none",whiteSpace:"normal"}})))}var Je,qe=l.forwardRef(ze),Ye=(n.p,["title","titleId"]);function Ke(){return Ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ke.apply(this,arguments)}function Xe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function $e(e,t){var n=e.title,r=e.titleId,a=Xe(e,Ye);return l.createElement("svg",Ke({width:"27.043mm",height:"19.318mm",viewBox:"0 0 27.043 19.318",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,Je||(Je=l.createElement("metadata",null,l.createElement("rdfRDF",null,l.createElement("ccWork",null,l.createElement("dcFormat",null,"image/svg+xml"))))),l.createElement("g",{transform:"translate(291.71 -197.38)",fill:"currentColor"},l.createElement("path",{d:"m-278.19 206.66a5.8207 5.8208 0 0 0-5.8208 5.8208 5.8207 5.8208 0 0 0 0.22167 1.587h11.194a5.8207 5.8208 0 0 0 0.22582-1.587 5.8207 5.8208 0 0 0-5.8203-5.8208z",stroke:"currentColor",strokeLinecap:"round",strokeWidth:.79375,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(.5 0 0 1 -419.48 95.401)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(.5 0 0 1 -438.53 95.401)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(.35355 .35355 -.70711 .70711 -308.78 16.318)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{transform:"matrix(-.35355 .35355 -.70711 -.70711 -82.024 181.9)",d:"m298.45 117.08h6.35",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.6202,style:{paintOrder:"markers fill stroke"}}),l.createElement("path",{d:"m-290.89 215.89h25.4",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.6203,style:{paintOrder:"normal"}}),l.createElement("path",{d:"m-278.2 204.97a0.81024 0.81024 0 0 1-0.56277-0.2367l-1.0583-1.0583a0.81024 0.81024 0 0 1-0.0692-0.076l-1.1958-1.1958a0.4051 0.8102 45 1 1 1.1452-1.1451l0.94207 0.94205v-2.2774a0.81024 0.81024 0 0 1 0-0.0806v-2.0366a0.8102 0.4051 0 1 1 1.619 0v3.176a0.8102 0.4051 0 0 1 0 0.0201v1.201l0.94414-0.94414a0.8102 0.4051 45 1 1 1.1452 1.1451l-1.2077 1.2077a0.81024 0.81024 0 0 1-0.0594 0.0636l-1.0583 1.0583a0.81024 0.81024 0 0 1-0.58394 0.23669z",color:"currentColor",colorRendering:"auto",dominantBaseline:"auto",imageRendering:"auto",shapeRendering:"auto","solid-color":"currentColor",style:{fontFeatureSettings:"normal",fontVariantAlternates:"normal",fontVariantCaps:"normal",fontVariantLigatures:"normal",fontVariantNumeric:"normal",fontVariantPosition:"normal",isolation:"auto",mixBlendMode:"normal",paintOrder:"markers fill stroke",shapePadding:0,textDecorationColor:"currentColor",textDecorationLine:"none",textDecorationStyle:"solid",textIndent:0,textOrientation:"mixed",textTransform:"none",whiteSpace:"normal"}})))}var Qe=l.forwardRef($e),Ze=(n.p,n(247),p.a.Text);function et(e){return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")}var tt=Object(f.b)((function(e){return{sunTimes:e.forecasts.forecast.sunTimes}}))((function(e){return Object(h.jsxs)("div",{className:"sun-times-container",children:[Object(h.jsxs)("div",{className:"sun-times-column",children:[Object(h.jsx)(Ae.a,{className:"sun-time-icon",component:qe}),Object(h.jsx)(Ze,{type:"secondary",children:et(e.sunTimes.sunrise)})]}),Object(h.jsxs)("div",{className:"sun-times-column",children:[Object(h.jsx)(Ae.a,{className:"sun-time-icon",component:Qe}),Object(h.jsx)(Ze,{type:"secondary",children:et(e.sunTimes.sunset)})]})]})}));function nt(e){navigator.geolocation.getCurrentPosition((function(t){return function(e,t){return rt.apply(this,arguments)}(t.coords,e)}),(function(t){e.onError()}))}function rt(){return(rt=Object(U.a)(M.a.mark((function e(t,n){var r,a,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at(t.latitude,t.longitude);case 2:if((r=e.sent).ok){e.next=6;break}return n.onError(),e.abrupt("return");case 6:return e.next=8,r.json();case 8:a=e.sent,(s=ot(a)).alt=t.altitude||NaN,n.onSuccess(s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e,t){return st.apply(this,arguments)}function st(){return(st=Object(U.a)(M.a.mark((function e(t,n){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://eu1.locationiq.com/v1/reverse.php",e.abrupt("return",fetch("".concat("https://eu1.locationiq.com/v1/reverse.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&lat=").concat(t,"&lon=").concat(n,"&format=json&accept-language=sv")));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return{country:e.display_name,name:"~"+(e.address.city||e.address.municipality||e.address.county||e.address.country),lat:e.lat,long:e.lon,alt:NaN}}var it=p.a.Title,ct=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={showLocationSearch:!1,showSettingsPage:!1,userLocationLoading:!1,userLocationError:!1},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchForecasts(this.props.selectedLocation),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){var n=t.matches?"dark":"light";e.props.updateSystemTheme(n)}))}},{key:"openLocationSearch",value:function(){this.setState({showLocationSearch:!0})}},{key:"closeLocationSearch",value:function(){this.setState({showLocationSearch:!1})}},{key:"openSettingsSearch",value:function(){this.setState({showSettingsPage:!0})}},{key:"closeSettingsSearch",value:function(){this.setState({showSettingsPage:!1})}},{key:"geolocate",value:function(){var e=this;this.setState(Object(s.a)(Object(s.a)({},this.state),{},{userLocationLoading:!0}));var t=function(t){e.setState(Object(s.a)(Object(s.a)({},e.state),{},{userLocationLoading:!1,userLocationError:t}))};nt({onSuccess:function(n){e.props.selectLocation(n),e.props.fetchForecasts(n),t(!1)},onError:function(){t(!0)}})}},{key:"getGeolocateIcon",value:function(){return this.state.userLocationLoading?Object(h.jsx)(ke.a,{}):this.state.userLocationError?Object(h.jsx)(Ne.a,{}):Object(h.jsx)(Se.a,{})}},{key:"render",value:function(){var e,t=this;return Object(h.jsxs)(d.a.Fragment,{children:[Object(h.jsxs)("div",{className:"weather-page",style:{height:0,overflow:this.state.showLocationSearch||this.state.showSettingsPage?"hidden":"unset"},children:[Object(h.jsxs)("div",{className:"button-container",children:[Object(h.jsx)(D.a,{className:"settings-button",ghost:!0,icon:Object(h.jsx)(Te.a,{}),shape:"circle",size:"large",onClick:function(){return t.openSettingsSearch()}}),Object(h.jsxs)("div",{children:[Object(h.jsx)(D.a,{className:"user-location-button",ghost:!0,icon:this.getGeolocateIcon(),shape:"circle",size:"large",onClick:function(){return t.geolocate()}}),Object(h.jsx)(D.a,{className:"search-location-button",ghost:!0,icon:Object(h.jsx)(C.a,{}),shape:"circle",size:"large",onClick:function(){return t.openLocationSearch()}})]})]}),Object(h.jsx)(it,{className:"title",style:{fontWeight:1,fontSize:50},children:null===(e=this.props.selectedLocation)||void 0===e?void 0:e.name}),this.props.weatherIsLoading?Object(h.jsx)(L.a,{className:"spin",size:"large"}):Object(h.jsxs)(d.a.Fragment,{children:[Object(h.jsx)(tt,{}),Object(h.jsx)(S,{})]})]}),this.state.showLocationSearch&&Object(h.jsx)(_e,{close:function(){return t.closeLocationSearch()}}),this.state.showSettingsPage&&Object(h.jsx)(Pe,{close:function(){return t.closeSettingsSearch()}})]})}}]),n}(d.a.Component);var ut=Object(f.b)((function(e){return{selectedLocation:e.locationSearch.selectedLocation,weatherIsLoading:e.forecasts.isLoading}}),(function(e){return{fetchForecasts:function(t){return e(ye(t))},updateSystemTheme:function(t){return e(function(e){return{type:Fe,systemTheme:e}}(t))},selectLocation:function(t){return e(q(t))}}}))(ct);var lt=function(){return Object(h.jsx)("div",{id:"app",children:Object(h.jsx)("div",{id:"page",children:Object(h.jsx)(ut,{})})})},dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ht(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var mt=n(63),pt=n(120),ft=n(123),vt=n(124);function gt(e,t,n){var r;r=n?"; max-age="+n:"",document.cookie=e+"="+encodeURI(t)+r+"; SameSite=Strict; path=/"}function jt(e){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].trim().split("="),a=Object(vt.a)(r,2),s=a[0],o=a[1];if(s===e)return decodeURI(o)}return null}var bt=function(){var e,t=function(){var e=jt("weather-locations");if(null!==e)try{return JSON.parse(e)}catch(t){}return[]}();if(t.length>0)e=t[0];else{var n=function(){var e=jt("weather-location");if(null!==e){!0;try{return JSON.parse(e)}catch(t){}}return null}();e=null!==n?n:{name:"Stockholm",country:"Sverige",lat:59.33066,long:18.06855,alt:10}}return{selectedLocation:e,locationHistory:t,geocodeResults:[],geocodeIsLoading:!1,geocodeErrorMessage:""}}();function yt(e){var t;gt("weather-locations",JSON.stringify(e),31536e3),t="weather-location",document.cookie=t+"=; Expires=Thu, 01 Jan 1970 00:00:01 GMT; Path=/;"}var wt={forecast:re(void 0),isLoading:!0,errorMessage:void 0};var Ot="theme-mode",xt={themeMode:jt(Ot)||"system",systemTheme:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",theme:"light",showGust:"true"===jt("show-gust"),showMinMaxTemp:"true"===jt("show-min-max-temp")};function _t(e){var t="dark";"dark"===e?document.documentElement.classList.add(t):document.documentElement.classList.remove(t)}!function(){var e;switch(xt.themeMode){case"light":e="light";break;case"dark":e="dark";break;case"system":e=xt.systemTheme}_t(e)}();var kt=Object(mt.b)({locationSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:var n=Object(ft.a)(e.locationHistory),r=n.findIndex((function(e){return e.name===t.location.name}));return-1!==r&&n.splice(r,1),n.length>=5&&n.splice(3,n.length-1),n.unshift(t.location),yt(n),Object(s.a)(Object(s.a)({},e),{},{selectedLocation:t.location,locationHistory:n});case V:return Object(s.a)(Object(s.a)({},e),{},{geocodeIsLoading:!0});case z:return Object(s.a)(Object(s.a)({},e),{},{geocodeIsLoading:!1,geocodeResults:t.results,geocodeErrorMessage:""});case J:return Object(s.a)(Object(s.a)({},e),{},{geocodeIsLoading:!1,geocodeResults:[],geocodeErrorMessage:t.errorMessage});default:return e}},forecasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0});case Q:return Object(s.a)(Object(s.a)({},e),{},{forecast:t.forecast,isLoading:!1,errorMessage:void 0});case Z:return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,errorMessage:t.errorMessage});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:var n;switch(t.themeMode){case"light":n="light";break;case"dark":n="dark";break;case"system":n=e.systemTheme}return _t(n),gt(Ot,t.themeMode,31536e3),Object(s.a)(Object(s.a)({},e),{},{themeMode:t.themeMode,theme:n});case Fe:return"system"===e.themeMode&&_t(t.systemTheme),Object(s.a)(Object(s.a)({},e),{},{systemTheme:t.systemTheme});case Ie:return void 0!==t.setting.showGust&&gt("show-gust",t.setting.showGust.toString(),31536e3),void 0!==t.setting.showMinMaxTemp&&gt("show-min-max-temp",t.setting.showMinMaxTemp.toString(),31536e3),Object(s.a)(Object(s.a)({},e),t.setting);default:return e}}}),Nt=mt.c,St=Object(mt.d)(kt,{},Object(mt.c)(Object(mt.a)(pt.a),Nt()));a.a.render(Object(h.jsx)(f.a,{store:St,children:Object(h.jsx)(lt,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");dt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ht(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ht(t,e)}))}}()}},[[248,1,2]]]);
//# sourceMappingURL=main.83e26f8f.chunk.js.map