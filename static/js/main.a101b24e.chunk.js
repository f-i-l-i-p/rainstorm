(this.webpackJsonprainstorm=this.webpackJsonprainstorm||[]).push([[0],{122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},127:function(e,t,a){},201:function(e,t,a){var n={"./clear_sky_day.svg":202,"./clear_sky_night.svg":203,"./cloudy.svg":204,"./fog.svg":205,"./half_clear_sky_day.svg":206,"./half_clear_sky_night.svg":207,"./heavy_rain.svg":208,"./heavy_sleet.svg":209,"./light_rain.svg":210,"./light_sleet.svg":211,"./moderate_rain.svg":212,"./moderate_sleet.svg":213,"./nearly_clear_sky_day.svg":214,"./nearly_clear_sky_night.svg":215,"./overcast.svg":216,"./snow.svg":217,"./thunder.svg":218,"./unknown.svg":219};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=201},202:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/clear_sky_day.08d2252c.svg"},203:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/clear_sky_night.fe72ba7f.svg"},204:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/cloudy.b1731609.svg"},205:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/fog.fdf19a8b.svg"},206:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/half_clear_sky_day.89d8c1b7.svg"},207:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/half_clear_sky_night.8d02af80.svg"},208:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/heavy_rain.b7a3ac6c.svg"},209:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/heavy_sleet.52c71e8e.svg"},210:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/light_rain.5dcd949e.svg"},211:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/light_sleet.a7670194.svg"},212:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/moderate_rain.5ca1b602.svg"},213:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/moderate_sleet.73193cce.svg"},214:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/nearly_clear_sky_day.36e650c9.svg"},215:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/nearly_clear_sky_night.5d46915e.svg"},216:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/overcast.a2822c8c.svg"},217:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/snow.9758315a.svg"},218:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/thunder.31fc6f06.svg"},219:function(e,t,a){"use strict";a.r(t),t.default=a.p+"static/media/unknown.c0e76eeb.svg"},220:function(e,t,a){},221:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},229:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a.n(n),s=(a(122),a(123),a(22)),c=a(23),i=a(26),o=a(25),u=a(0),l=a.n(u),d=(a(124),a(125),a(4)),h=function(e){return Object(d.jsx)("div",{className:"paper",style:e.style,children:e.children})},p=a(237),f=(a(127),a(33)),m=p.a.Text;var v=Object(f.b)((function(e){return{showGust:e.settings.showGust,showMinMaxTemp:e.settings.showMinMaxTemp}}))((function(e){return Object(d.jsx)("div",{className:"weather_cell",children:void 0!==e.weather&&Object(d.jsxs)(l.a.Fragment,{children:[e.showMinMaxTemp&&e.weather.temperatureMin&&e.weather.temperatureMax?Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{strong:!0,className:"minimum",children:Math.round(e.weather.temperatureMin)}),Object(d.jsx)(m,{type:"secondary",style:{marginLeft:"1px",marginRight:"1px"},children:"/"}),Object(d.jsx)(m,{strong:!0,className:"maximum",children:Math.round(e.weather.temperatureMax)}),Object(d.jsx)(m,{strong:!0,children:" \xb0C"})]}):Object(d.jsxs)(m,{strong:!0,children:[Math.round(e.weather.temperature)," \xb0C"]}),e.weather.symbol&&Object(d.jsx)("img",{className:"weather_symbol",alt:"",src:a(201)("./"+e.weather.symbol+".svg").default}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)(m,{type:"secondary",children:Math.round(e.weather.wind)}),e.showGust&&e.weather.gust&&Object(d.jsx)(m,{className:"maximum",type:"secondary",style:{marginLeft:"1px",marginRight:"1px"},children:"("+Math.round(e.weather.gust)+")"}),Object(d.jsx)(m,{type:"secondary",children:"m/s"})]}),Object(d.jsxs)(m,{type:"secondary",children:[" ",e.weather.precipitation+" "+e.weather.precipitationUnit]})]})]})})})),g=a(235),j=(a(220),p.a.Text),b=function(e){return Object(d.jsx)("div",{className:"time_cell",children:Object(d.jsx)(j,{strong:!0,children:e.time})})},y=(a(221),p.a.Title),_=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{children:[Object(d.jsx)(y,{level:4,children:this.props.name}),Object(d.jsxs)("div",{className:"columns",children:[Object(d.jsx)("div",{className:"right-column",children:Object(d.jsx)("div",{className:"time-row",style:{width:"100%"},children:Object(d.jsx)(h,{style:{width:"100%",height:"100%"}})})}),Object(d.jsxs)("div",{className:"all-columns",children:[Object(d.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(d.jsx)("div",{className:"weather-row",children:Object(d.jsx)(h,{style:{width:"100%",height:"100%"}})},t)}))]}),Object(d.jsxs)("div",{className:"left-column",children:[Object(d.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(d.jsx)("div",{className:"weather-row",children:Object(d.jsx)(p.a,{className:"weather-provider-name",children:e})},t)}))]}),Object(d.jsxs)("div",{className:"divider-column",children:[Object(d.jsx)("div",{className:"time-row"}),this.props.providers.map((function(e,t){return Object(d.jsx)("div",{className:"weather-row",children:Object(d.jsx)(g.a,{type:"vertical",style:{height:"calc(100% - 5px)",margin:0}})},t)}))]}),Object(d.jsxs)("div",{className:"right-column",style:{overflowX:"auto"},children:[Object(d.jsx)("div",{className:"time-row",style:{justifyContent:"space-around"},children:this.props.tableData.map((function(e,t){return Object(d.jsx)(b,{time:O(e)},t)}))}),this.props.providers.map((function(t,a){return Object(d.jsx)("div",{className:"weather-row",style:{justifyContent:"space-around"},children:e.props.tableData.map((function(e,a){return Object(d.jsx)(v,{weather:e.weather[t]},a)}))},a)}))]})]})]})}}]),a}(l.a.Component);function O(e){var t=e;return t.date?("0"+t.date.getHours()).slice(-2):t.startDate&&t.endDate?("0"+t.startDate.getHours()).slice(-2)+"\u2014"+("0"+t.endDate.getHours()).slice(-2):""}var w=_,x=a(236),k=p.a.Title,N=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"getTableName",value:function(e,t){var a="";if(!t)return a;switch(a=0===e?"Idag, ":"",t.getDay()){case 1:a+="M\xe5ndag";break;case 2:a+="Tisdag";break;case 3:a+="Onsdag";break;case 4:a+="Torsdag";break;case 5:a+="Fredag";break;case 6:a+="L\xf6rdag";break;case 0:a+="S\xf6ndag"}return a}},{key:"render",value:function(){for(var e,t=this,a=[],n=0;n<this.props.forecast.days.length-1;n+=2)a.push([this.props.forecast.days[n],this.props.forecast.days[n+1]]);return Object(d.jsx)("div",{className:"list",children:this.props.isLoading?Object(d.jsx)(x.a,{className:"spin",size:"large"}):Object(d.jsxs)(l.a.Fragment,{children:[Object(d.jsx)(k,{className:"title",style:{fontWeight:1,fontSize:50},children:null===(e=this.props.selectedLocation)||void 0===e?void 0:e.name}),Object(d.jsxs)("div",{className:"items",children:[Object(d.jsx)(w,{tableData:this.props.forecast.hours,providers:this.props.forecast.providers,name:this.getTableName(0,this.props.forecast.hours[0].date)}),a.map((function(e,a){return Object(d.jsx)("div",{className:"weather-table-pair",children:e.map((function(e,n){return Object(d.jsx)(w,{tableData:e.spans,providers:t.props.forecast.providers,name:t.getTableName(a+n+1,e.spans[0].startDate)},n)}))},a)}))]})]})})}}]),a}(l.a.Component);var T,S=Object(f.b)((function(e){return{forecast:e.forecasts.forecast,isLoading:e.forecasts.isLoading,selectedLocation:e.locationSearch.selectedLocation}}))(N),D=a(238),M=a(112),L=a(116),C=a(15),E=a.n(C),U=a(27),F=a(109),I=0;function R(e,t){var a=e.trim();if(a!==T){if(T=a,""===a)return t.onSuccess([]),void I++;var n=++I;setTimeout((function(){return function(e,t,a){return W.apply(this,arguments)}(n,a,t)}),500)}}function A(e){return e!==I}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(U.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://api.locationiq.com/v1/autocomplete.php",e.abrupt("return",fetch("".concat("https://api.locationiq.com/v1/autocomplete.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&q=").concat(t,"&viewbox=3,44,32,71&limit=20&dedupe=1&accept-language=sv")));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var t,a=[],n=Object(F.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push({country:r.display_address,name:r.display_place,lat:Number(r.lat),long:Number(r.lon),alt:0})}}catch(s){n.e(s)}finally{n.f()}return a}function W(){return(W=Object(U.a)(E.a.mark((function e(t,a,n){var r,s,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,G(a);case 4:if(r=e.sent,!A(t)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,r.json();case 9:if(s=e.sent,!A(t)){e.next=12;break}return e.abrupt("return");case 12:r.ok?(c=P(s),n.onSuccess(c)):"Unable to geocode"===s.error?(i=[],n.onSuccess(i)):(console.warn("Geocode response error!",r.statusText),n.onAbort());case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q="SELECT_LOCATION",B="SELECT_USER_LOCATION",z="GEOCODE_START",V="GEOCODE_SUCCESS",X="GEOCODE_FAILURE",Y="LOCATE_USER_START",J="LOCATE_USER_SUCCESS",K="LOCATE_USER_FAILURE";function $(e){navigator.geolocation.getCurrentPosition((function(t){return Q(t.coords,e)}),(function(t){Q({altitude:10,altitudeAccuracy:0,latitude:59.33066,longitude:18.06855,accuracy:0,heading:null,speed:0},e)}))}function Q(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(U.a)(E.a.mark((function e(t,a){var n,r,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t.latitude,t.longitude);case 2:if((n=e.sent).ok){e.next=6;break}return a.onError(),e.abrupt("return");case 6:return e.next=8,n.json();case 8:r=e.sent,(s=ae(r)).alt=t.altitude||NaN,a.onSuccess(s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(U.a)(E.a.mark((function e(t,a){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"pk.4b179e38c5f1f5a80ad572c3bb3c0309","https://eu1.locationiq.com/v1/reverse.php",e.abrupt("return",fetch("".concat("https://eu1.locationiq.com/v1/reverse.php","?key=").concat("pk.4b179e38c5f1f5a80ad572c3bb3c0309","&lat=").concat(t,"&lon=").concat(a,"&format=json&accept-language=sv")));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){return{country:e.display_name,name:e.address.city||e.address.municipality||e.address.county||e.address.country,lat:e.lat,long:e.lon,alt:NaN}}function ne(e){return{type:X,errorMessage:e}}function re(e){return{type:J,location:e}}a(227);var se,ce=p.a.Text,ie=function(e){return Object(d.jsxs)("button",{className:"location-list-item",onClick:function(){return e.onSelect(e.location)},children:[Object(d.jsx)(ce,{strong:!0,children:e.location.name}),Object(d.jsx)(ce,{type:"secondary",children:e.location.country})]})},oe="FORECAST_FETCH_START",ue="FORECAST_FETCH_SUCCESS",le="FORECAST_FETCH_FAILURE";function de(e){var t=new Date;return t.setHours(t.getHours()+1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),pe(t,36e5,e)}function he(e){var t=new Date;return t.setDate(t.getDate()+1),pe(t,864e5,e)}function pe(e,t,a){for(var n=[],r=0;r<a;r++)n.push(new Date(e.getTime()+r*t));return n}!function(e){e.unknown="unknown",e.clear_sky_day="clear_sky_day",e.clear_sky_night="clear_sky_night",e.nearly_clear_sky_day="nearly_clear_sky_day",e.nearly_clear_sky_night="nearly_clear_sky_night",e.half_clear_sky_day="half_clear_sky_day",e.half_clear_sky_night="half_clear_sky_night",e.cloudy="cloudy",e.light_rain="light_rain",e.moderate_rain="moderate_rain",e.heavy_rain="heavy_rain",e.light_sleet="light_sleet",e.moderate_sleet="moderate_sleet",e.heavy_sleet="heavy_sleet",e.snow="snow",e.thunder="thunder",e.fog="fog"}(se||(se={}));var fe=function(){function e(t){Object(s.a)(this,e),this.name=void 0,this.name=t}return Object(c.a)(e,[{key:"fetchForecast",value:function(){var e=Object(U.a)(E.a.mark((function e(t,a,n,r){var s,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.requestData(a.lat.toString(),a.long.toString());case 3:return s=e.sent,e.next=6,s.json();case 6:return c=e.sent,e.next=9,this.fillForecast(c,t);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),console.error(e.t0),r(e.t0),e.abrupt("return");case 16:n();case 17:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()}]),e}(),me=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this,"Yr")).icons={heavyrain:se.heavy_rain,lightrain:se.light_rain,rain:se.moderate_rain,clearsky_day:se.clear_sky_day,clearsky_night:se.clear_sky_day,fair_day:se.nearly_clear_sky_day,fair_night:se.nearly_clear_sky_day,partlycloudy_day:se.half_clear_sky_day,partlycloudy_night:se.half_clear_sky_day,cloudy:se.cloudy,fog:se.fog,heavysnow:se.snow,heavysnowshowers:se.snow,lightsnow:se.snow,lightsnowshowers:se.snow,snow:se.snow,heavysleet:se.heavy_sleet,heavysleetshowers:se.heavy_sleet,lightsleet:se.light_sleet,lightsleetshowers:se.light_sleet,sleet:se.moderate_sleet,sleetshowers:se.moderate_sleet},e}return Object(c.a)(a,[{key:"toNight",value:function(e,t){var a=t.getHours();if(a>15||a<8)switch(e){case se.clear_sky_day:return se.clear_sky_night;case se.half_clear_sky_day:return se.half_clear_sky_night;case se.nearly_clear_sky_day:return se.nearly_clear_sky_night}return e}},{key:"requestData",value:function(){var e=Object(U.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.met.no/weatherapi/locationforecast/2.0/complete?lat="+t+"&lon="+a);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Weather response error! status: "+n.status);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"fillForecast",value:function(e,t){for(var a=e.properties.timeseries,n=0,r=0;n<t.hours.length&&r<a.length;){var s=a[r],c=new Date(s.time);if(t.hours[n].date<c)n++;else if(t.hours[n].date>c)r++;else{var i=t.hours[n].weather[this.name],o=void 0,u=void 0;if(s.data.next_1_hours)o=s.data.next_1_hours.summary.symbol_code,u=s.data.next_1_hours.details.precipitation_amount;else if(s.data.next_6_hours)o=s.data.next_6_hours.summary.symbol_code,u=s.data.next_6_hours.details.precipitation_amount;else{if(!s.data.next_12_hours)continue;o=s.data.next_12_hours.summary.symbol_code,u=s.data.next_12_hours.details.precipitation_amount}var l=this.toNight(this.icons[o]||se.unknown,c);l===se.unknown&&console.warn("Unknown symbol",o),i.temperature=s.data.instant.details.air_temperature,i.wind=s.data.instant.details.wind_speed,i.gust=s.data.instant.details.wind_speed_of_gust,i.precipitation=u,i.precipitationUnit="mm",i.symbol=l,r++,n++}}r=0;for(var d=0;d<t.days.length;d++)for(var h=t.days[d],p=0;p<h.spans.length&&!(r>=a.length);p++){var f=h.spans[p],m=a[r],v=new Date(m.time);if(!(f.startDate<v))if(f.startDate>v)r++,p--;else{var g=f.weather[this.name],j=(f.endDate.getTime()-f.startDate.getTime())/36e5,b=void 0,y=void 0,_=void 0,O=void 0;if(6===j)b=m.data.next_6_hours.summary.symbol_code,y=m.data.next_6_hours.details.precipitation_amount,_=m.data.next_6_hours.details.air_temperature_min,O=m.data.next_6_hours.details.air_temperature_max;else{if(12!==j){console.warn("Unknown span length",j),r++;continue}var w=a[r+1];b=m.data.next_12_hours.summary.symbol_code;var x=m.data.next_6_hours.details.precipitation_amount,k=w.data.next_6_hours.details.precipitation_amount;y=Math.round((x+k)/12*10)/10,_=Math.min(m.data.next_6_hours.details.air_temperature_min,w.data.next_6_hours.details.air_temperature_min),O=Math.max(m.data.next_6_hours.details.air_temperature_max,w.data.next_6_hours.details.air_temperature_max)}var N=this.toNight(this.icons[b]||se.unknown,v);N===se.unknown&&console.warn("Unknown symbol",b),g.temperature=(O+_)/2,g.temperatureMax=O,g.temperatureMin=_,g.wind=m.data.instant.details.wind_speed,g.gust=m.data.instant.details.wind_speed_of_gust,g.precipitation=y,g.precipitationUnit="mm/h",g.symbol=N,r++}}}}]),a}(fe),ve=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this,"SMHI")).icons={1:se.clear_sky_day,2:se.nearly_clear_sky_day,3:se.half_clear_sky_day,4:se.half_clear_sky_day,5:se.cloudy,6:se.cloudy,7:se.fog,8:se.light_rain,9:se.moderate_rain,10:se.heavy_rain,11:se.thunder,18:se.light_rain,19:se.moderate_rain,20:se.heavy_rain,21:se.thunder,22:se.light_sleet,23:se.moderate_sleet,24:se.heavy_sleet,25:se.snow,26:se.snow,27:se.snow},e}return Object(c.a)(a,[{key:"getIcon",value:function(e,t){var a=this.icons[e];if(!a)return console.warn("Unknown symbol value",e),se.unknown;var n=t.getHours();if(n>15||n<8)switch(a){case se.clear_sky_day:return se.clear_sky_night;case se.half_clear_sky_day:return se.half_clear_sky_night;case se.nearly_clear_sky_day:return se.nearly_clear_sky_night}return a}},{key:"requestData",value:function(){var e=Object(U.a)(E.a.mark((function e(t,a){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 9,e.next=3,fetch("https://opendata-download-metfcst.smhi.se/api/category/pmp3g/version/2/geotype/point/lon/"+a.substr(0,9)+"/lat/"+t.substr(0,9)+"/data.json");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("Weather response error! status: ' + result.status");case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"fillForecast",value:function(e,t){for(var a=e.timeSeries,n=0,r=0;n<t.hours.length&&r<a.length;){var s=a[r],c=new Date(s.validTime);if(t.hours[n].date<c)n++;else if(t.hours[n].date>c)r++;else{var i=s.parameters,o=t.hours[n].weather[this.name];o.temperature=i.find((function(e){return"t"===e.name})).values[0],o.precipitation=i.find((function(e){return"pmean"===e.name})).values[0],o.precipitationUnit="mm",o.wind=i.find((function(e){return"ws"===e.name})).values[0],o.gust=i.find((function(e){return"gust"===e.name})).values[0],o.symbol=this.getIcon(i.find((function(e){return"Wsymb2"===e.name})).values[0],c),n++,r++}}r=0;for(var u=0;u<t.days.length;u++)for(var l=t.days[u],d=0;d<l.spans.length;d++){var h=l.spans[d],p=a[r],f=new Date(p.validTime);if(!(h.startDate<f))if(h.startDate>f)r++,d--;else{var m=h.weather[this.name],v=new Date((h.startDate.getTime()+h.endDate.getTime())/2);r=this.sumWeather(a,r,h.endDate,v,m)}}}},{key:"sumWeather",value:function(e,t,a,n,r){for(var s=t,c=0,i=NaN,o=NaN,u=0,l=0,d={};s<e.length;){var h=e[s];if(new Date(h.validTime)>a){s--;break}var p=h.parameters;c+=p.find((function(e){return"pmean"===e.name})).values[0];var f=p.find((function(e){return"t"===e.name})).values[0];(isNaN(i)||f<i)&&(i=f),(isNaN(o)||f>o)&&(o=f);var m=p.find((function(e){return"ws"===e.name})).values[0];m>u&&(u=m);var v=p.find((function(e){return"gust"===e.name})).values[0];v>l&&(l=v);var g=p.find((function(e){return"Wsymb2"===e.name})).values[0];g in d?d[g]+=1:d[g]=1,s++}var j=s-t+1;r.precipitation=Math.round(10*c/j)/10,r.precipitationUnit="mm/h",r.temperatureMax=o,r.temperatureMin=i,r.temperature=(o+i)/2,r.wind=u,r.gust=l;var b=0,y="";for(var _ in d){var O=d[_];O>b&&(b=O,y=_)}return r.symbol=this.getIcon(y,n),s}}]),a}(fe),ge=[new ve,new me];function je(e,t){var a=be(e),n=ge.length,r=function(){0===--n&&t.onSuccess(a)},s=function(e){t.onError(e.message)};ge.forEach((function(t){t.fetchForecast(a,e,r,s)}))}function be(e){var t=new Date;return{hours:de(24).map((function(e){return{date:e,weather:_e()}})),days:(t,he(8).map((function(e,t){var a=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDate();return{spans:t<=4?[{startDate:new Date(Date.UTC(a,n,r,0)),endDate:new Date(Date.UTC(a,n,r,6)),weather:_e()},{startDate:new Date(Date.UTC(a,n,r,6)),endDate:new Date(Date.UTC(a,n,r,12)),weather:_e()},{startDate:new Date(Date.UTC(a,n,r,12)),endDate:new Date(Date.UTC(a,n,r,18)),weather:_e()},{startDate:new Date(Date.UTC(a,n,r,18)),endDate:new Date(Date.UTC(a,n,r,24)),weather:_e()}]:[{startDate:new Date(Date.UTC(a,n,r,0)),endDate:new Date(Date.UTC(a,n,r,12)),weather:_e()},{startDate:new Date(Date.UTC(a,n,r,12)),endDate:new Date(Date.UTC(a,n,r,24)),weather:_e()}]}}))),providers:ye(),location:e||{country:"",name:"",lat:NaN,long:NaN,alt:NaN}}}function ye(){return ge.map((function(e){return e.name}))}function _e(){var e={};return ye().forEach((function(t){e[t]={temperature:NaN,temperatureMax:NaN,temperatureMin:NaN,wind:NaN,gust:NaN,precipitation:NaN,precipitationUnit:"",symbol:se.unknown}})),e}function Oe(e){return{type:ue,forecast:e}}function we(e){return{type:le,errorMessage:e}}var xe=function(e){return function(){var t=Object(U.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={onSuccess:function(e){return a(Oe(e))},onError:function(e){return a(we(e))}},a({type:oe}),je(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ke=(a(228),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onLocationSelect",value:function(e){var t;e.country!==(null===(t=this.props.selectedLocation)||void 0===t?void 0:t.country)&&(this.props.selectLocation(e),this.props.fetchForecasts(e)),this.props.onSelect()}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"location-list",children:this.props.locationResults.map((function(t,a){return Object(d.jsxs)(l.a.Fragment,{children:[Object(d.jsx)(ie,{location:t,onSelect:function(t){return e.onLocationSelect(t)}}),Object(d.jsx)(g.a,{style:{margin:0}})]},a)}))})}}]),a}(l.a.Component));var Ne=Object(f.b)((function(e){return{locationResults:e.locationSearch.geocodeResults,selectedLocation:e.locationSearch.selectedLocation}}),(function(e){return{selectLocation:function(t){return e(function(e){return{type:q,location:e}}(t))},fetchForecasts:function(t){return e(xe(t))}}}))(ke),Te=(a(229),function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onChange",value:function(e){this.props.searchLocations(e)}},{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"search",children:[Object(d.jsxs)("div",{className:"search-bar",children:[Object(d.jsx)(D.a,{className:"search-input",size:"large",bordered:!1,placeholder:"S\xf6k",autoFocus:!0,allowClear:!0,prefix:Object(d.jsx)(L.a,{}),onChange:function(t){return e.onChange(t.target.value)}}),Object(d.jsx)(M.a,{className:"search-cancel-button",size:"large",ghost:!0,onClick:function(){return e.props.close()},children:"Avbryt"})]}),Object(d.jsx)(g.a,{style:{margin:0}}),this.props.isLoading?Object(d.jsx)(x.a,{className:"location-search-spin"}):Object(d.jsx)(Ne,{onSelect:function(){return e.props.close()}})]})}}]),a}(l.a.Component));var Se=Object(f.b)((function(e){return{isLoading:e.locationSearch.geocodeIsLoading}}),(function(e){return{searchLocations:function(t){return e((a=t,function(){var e=Object(U.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={onSuccess:function(e){return t({type:V,results:e})},onAbort:function(){return t(ne(""))}},t({type:z}),R(a,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a}}}))(Te),De=a(241),Me=(a(230),a(231),a(232),p.a.Title),Le=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{className:"header-container",children:[Object(d.jsxs)("div",{className:"header-grid",children:[Object(d.jsx)(Me,{className:"header-title",level:5,children:this.props.title}),this.props.backButton&&Object(d.jsx)(M.a,{className:"header-back-button",onClick:function(){return e.props.backButton?e.props.backButton():{}},size:"large",ghost:!0,children:this.props.backButtonName})]}),Object(d.jsx)(g.a,{className:"header-divider"})]})}}]),a}(l.a.Component),Ce=a(239),Ee=a(240),Ue=a(242),Fe="UPDATE_THEME_MODE",Ie="UPDATE_SYSTEM_THEME",Re="UPDATE_SETTING";var Ae=p.a.Text,Ge=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onThemeChange",value:function(e){switch(e){case 1:this.props.updateThemeMode("light");break;case 2:this.props.updateThemeMode("dark");break;case 3:this.props.updateThemeMode("system")}}},{key:"render",value:function(){var e,t=this;switch(this.props.theme){case"light":e=1;break;case"dark":e=2;break;case"system":e=3}return Object(d.jsxs)("div",{className:"settings-page",children:[Object(d.jsx)(Le,{title:"Inst\xe4llningar",backButton:function(){return t.props.close()},backButtonName:"Klar"}),Object(d.jsx)("div",{className:"settings-content",children:Object(d.jsxs)("div",{children:[Object(d.jsx)(Ae,{className:"settings-options-title",type:"secondary",strong:!0,children:"Utseende"}),Object(d.jsx)(g.a,{}),Object(d.jsx)(Ce.a.Group,{className:"settings-options",value:e,onChange:function(e){return t.onThemeChange(e.target.value)},children:Object(d.jsxs)(Ee.b,{direction:"vertical",children:[Object(d.jsx)(Ce.a,{value:1,children:"Ljust"}),Object(d.jsx)(g.a,{}),Object(d.jsx)(Ce.a,{value:2,children:"M\xf6rkt"}),Object(d.jsx)(g.a,{}),Object(d.jsx)(Ce.a,{value:3,children:"F\xf6lj System"})]})}),Object(d.jsx)(g.a,{}),Object(d.jsx)(Ae,{className:"settings-options-title",type:"secondary",strong:!0,children:"V\xe4der"}),Object(d.jsx)(g.a,{}),Object(d.jsx)("div",{className:"settings-options",children:Object(d.jsxs)(Ee.b,{direction:"vertical",children:[Object(d.jsxs)("div",{className:"settings-row",children:[Object(d.jsx)(Ae,{children:"Visa min/max temperatur"}),Object(d.jsx)(Ue.a,{checked:this.props.showMinMaxTemp,onChange:function(e){return t.props.updateSettings({showMinMaxTemp:e})}})]}),Object(d.jsx)(g.a,{}),Object(d.jsxs)("div",{className:"settings-row",children:[Object(d.jsx)(Ae,{children:"Visa byvind"}),Object(d.jsx)(Ue.a,{checked:this.props.showGust,onChange:function(e){return t.props.updateSettings({showGust:e})}})]})]})}),Object(d.jsx)(g.a,{})]})})]})}}]),a}(l.a.Component);var He=Object(f.b)((function(e){return{theme:e.settings.themeMode,showGust:e.settings.showGust,showMinMaxTemp:e.settings.showMinMaxTemp}}),(function(e){return{updateThemeMode:function(t){return e({type:Fe,themeMode:t})},updateSettings:function(t){return e(function(e){return{type:Re,setting:e}}(t))}}}))(Ge),Pe=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={showLocationSearch:!1,showSettingsPage:!1},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.findUserPosition((function(t){e.props.selectUserLocation(),e.props.fetchForecasts(t)})),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(t){var a=t.matches?"dark":"light";e.props.updateSystemTheme(a)}))}},{key:"openLocationSearch",value:function(){this.setState({showLocationSearch:!0})}},{key:"closeLocationSearch",value:function(){this.setState({showLocationSearch:!1})}},{key:"openSettingsSearch",value:function(){this.setState({showSettingsPage:!0})}},{key:"closeSettingsSearch",value:function(){this.setState({showSettingsPage:!1})}},{key:"render",value:function(){var e=this;return Object(d.jsxs)(l.a.Fragment,{children:[Object(d.jsx)("div",{id:"background"}),Object(d.jsxs)("div",{className:"weather-page",style:{height:0,overflow:this.state.showLocationSearch||this.state.showSettingsPage?"hidden":"unset"},children:[Object(d.jsxs)("div",{className:"button-container",children:[Object(d.jsx)(M.a,{className:"settings-button",ghost:!0,icon:Object(d.jsx)(De.a,{}),shape:"circle",size:"large",onClick:function(){return e.openSettingsSearch()}}),Object(d.jsx)(M.a,{className:"search-location-button",ghost:!0,icon:Object(d.jsx)(L.a,{}),shape:"circle",size:"large",onClick:function(){return e.openLocationSearch()}})]}),Object(d.jsx)(S,{})]}),this.state.showLocationSearch&&Object(d.jsx)(Se,{close:function(){return e.closeLocationSearch()}}),this.state.showSettingsPage&&Object(d.jsx)(He,{close:function(){return e.closeSettingsSearch()}})]})}}]),a}(l.a.Component);var We=Object(f.b)((function(e){return{}}),(function(e){return{findUserPosition:function(t){return e((a=t,function(){var e=Object(U.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={onSuccess:function(e){t(re(e)),a&&a(e)},onError:function(){return t(ne(""))}},t({type:Y}),$(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var a},selectUserLocation:function(){return e({type:B})},fetchForecasts:function(t){return e(xe(t))},updateSystemTheme:function(t){return e(function(e){return{type:Ie,systemTheme:e}}(t))}}}))(Pe);var qe=function(){return Object(d.jsx)("div",{id:"app",children:Object(d.jsx)("div",{id:"page",children:Object(d.jsx)(We,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be=a(58),ze=a(110),Ve=a(14),Xe={selectedLocation:void 0,geocodeResults:[],geocodeIsLoading:!1,geocodeErrorMessage:"",userLocation:void 0,userLocationIsLoading:!1,userLocationErrorMessage:""};var Ye={forecast:be(void 0),isLoading:!0,errorMessage:void 0};var Je=a(113);function Ke(e,t,a){var n;n=a?"; max-age="+a:"",document.cookie=e+"="+t+n+"; path=/"}function $e(e){for(var t=document.cookie.split(";"),a=0;a<t.length;a++){var n=t[a].trim().split("="),r=Object(Je.a)(n,2),s=r[0],c=r[1];if(s===e)return c}return null}var Qe="theme-mode",Ze={themeMode:$e(Qe)||"system",systemTheme:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",theme:"light",showGust:"true"===$e("show-gust"),showMinMaxTemp:"true"===$e("show-min-max-temp")};function et(e){var t="dark";"dark"===e?document.documentElement.classList.add(t):document.documentElement.classList.remove(t)}!function(){var e;switch(Ze.themeMode){case"light":e="light";break;case"dark":e="dark";break;case"system":e=Ze.systemTheme}et(e)}();var tt=Object(Be.b)({locationSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(Ve.a)(Object(Ve.a)({},e),{},{selectedLocation:t.location});case B:return Object(Ve.a)(Object(Ve.a)({},e),{},{selectedLocation:e.userLocation});case z:return Object(Ve.a)(Object(Ve.a)({},e),{},{geocodeIsLoading:!0});case V:return Object(Ve.a)(Object(Ve.a)({},e),{},{geocodeIsLoading:!1,geocodeResults:t.results,geocodeErrorMessage:""});case X:return Object(Ve.a)(Object(Ve.a)({},e),{},{geocodeIsLoading:!1,geocodeResults:[],geocodeErrorMessage:t.errorMessage});case Y:return Object(Ve.a)(Object(Ve.a)({},e),{},{userLocationIsLoading:!0});case J:return Object(Ve.a)(Object(Ve.a)({},e),{},{userLocationIsLoading:!1,userLocation:t.location});case K:return Object(Ve.a)(Object(Ve.a)({},e),{},{userLocationIsLoading:!1,userLocationErrorMessage:t.errorMessage});default:return e}},forecasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!0});case ue:return Object(Ve.a)(Object(Ve.a)({},e),{},{forecast:t.forecast,isLoading:!1,errorMessage:void 0});case le:return Object(Ve.a)(Object(Ve.a)({},e),{},{isLoading:!1,errorMessage:t.errorMessage});default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Fe:var a;switch(t.themeMode){case"light":a="light";break;case"dark":a="dark";break;case"system":a=e.systemTheme}return et(a),Ke(Qe,t.themeMode,31536e3),Object(Ve.a)(Object(Ve.a)({},e),{},{themeMode:t.themeMode,theme:a});case Ie:return"system"===e.themeMode&&et(t.systemTheme),Object(Ve.a)(Object(Ve.a)({},e),{},{systemTheme:t.systemTheme});case Re:return void 0!==t.setting.showGust&&Ke("show-gust",t.setting.showGust.toString(),31536e3),void 0!==t.setting.showMinMaxTemp&&Ke("show-min-max-temp",t.setting.showMinMaxTemp.toString(),31536e3),Object(Ve.a)(Object(Ve.a)({},e),t.setting);default:return e}}}),at=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Be.c,nt=Object(Be.d)(tt,{},Object(Be.c)(Object(Be.a)(ze.a),at()));r.a.render(Object(d.jsx)(f.a,{store:nt,children:Object(d.jsx)(qe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[233,1,2]]]);
//# sourceMappingURL=main.a101b24e.chunk.js.map